{
  "version": 3,
  "sources": ["../../../../../../../../../../third_party/devtools-frontend/src/front_end/panels/recorder/injected/SelectorPicker.ts"],
  "sourcesContent": ["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {Logger} from './Logger.js';\nimport {SelectorComputer} from './SelectorComputer.js';\nimport type {AccessibilityBindings} from './selectors/ARIASelector.js';\nimport {getClickableTargetFromEvent, getMouseEventOffsets, haultImmediateEvent} from './util.js';\n\ndeclare global {\n  interface Window {\n    captureSelectors(data: string): void;\n  }\n}\n\nclass SelectorPicker {\n  #logger: Logger;\n  #computer: SelectorComputer;\n\n  constructor(\n      bindings: AccessibilityBindings,\n      customAttribute = '',\n      debug = true,\n  ) {\n    this.#logger = new Logger(debug ? 'debug' : 'silent');\n    this.#logger.log('Creating a SelectorPicker');\n    this.#computer = new SelectorComputer(\n        bindings,\n        this.#logger,\n        customAttribute,\n    );\n  }\n\n  #handleClickEvent = (event: MouseEvent): void => {\n    haultImmediateEvent(event);\n\n    const target = getClickableTargetFromEvent(event);\n    window.captureSelectors(\n        JSON.stringify({\n          selectors: this.#computer.getSelectors(target),\n          ...getMouseEventOffsets(event, target),\n        }),\n    );\n  };\n\n  start = (): void => {\n    this.#logger.log('Setting up selector listeners');\n\n    window.addEventListener('click', this.#handleClickEvent, true);\n    window.addEventListener('mousedown', haultImmediateEvent, true);\n    window.addEventListener('mouseup', haultImmediateEvent, true);\n  };\n\n  stop = (): void => {\n    this.#logger.log('Tearing down selector listeners');\n\n    window.removeEventListener('click', this.#handleClickEvent, true);\n    window.removeEventListener('mousedown', haultImmediateEvent, true);\n    window.removeEventListener('mouseup', haultImmediateEvent, true);\n  };\n}\n\nexport {SelectorPicker};\n"],
  "mappings": ";AAIA,SAAQ,cAAa;AACrB,SAAQ,wBAAuB;AAE/B,SAAQ,6BAA6B,sBAAsB,2BAA0B;AAQrF,MAAM,eAAe;AAAA,EACnB;AAAA,EACA;AAAA,EAEA,YACI,UACA,kBAAkB,IAClB,QAAQ,MACV;AACA,SAAK,UAAU,IAAI,OAAO,QAAQ,UAAU,QAAQ;AACpD,SAAK,QAAQ,IAAI,2BAA2B;AAC5C,SAAK,YAAY,IAAI;AAAA,MACjB;AAAA,MACA,KAAK;AAAA,MACL;AAAA,IACJ;AAAA,EACF;AAAA,EAEA,oBAAoB,CAAC,UAA4B;AAC/C,wBAAoB,KAAK;AAEzB,UAAM,SAAS,4BAA4B,KAAK;AAChD,WAAO;AAAA,MACH,KAAK,UAAU;AAAA,QACb,WAAW,KAAK,UAAU,aAAa,MAAM;AAAA,QAC7C,GAAG,qBAAqB,OAAO,MAAM;AAAA,MACvC,CAAC;AAAA,IACL;AAAA,EACF;AAAA,EAEA,QAAQ,MAAY;AAClB,SAAK,QAAQ,IAAI,+BAA+B;AAEhD,WAAO,iBAAiB,SAAS,KAAK,mBAAmB,IAAI;AAC7D,WAAO,iBAAiB,aAAa,qBAAqB,IAAI;AAC9D,WAAO,iBAAiB,WAAW,qBAAqB,IAAI;AAAA,EAC9D;AAAA,EAEA,OAAO,MAAY;AACjB,SAAK,QAAQ,IAAI,iCAAiC;AAElD,WAAO,oBAAoB,SAAS,KAAK,mBAAmB,IAAI;AAChE,WAAO,oBAAoB,aAAa,qBAAqB,IAAI;AACjE,WAAO,oBAAoB,WAAW,qBAAqB,IAAI;AAAA,EACjE;AACF;AAEA,SAAQ;",
  "names": []
}
