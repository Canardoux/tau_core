{
  "version": 3,
  "sources": ["../../../../../../../../../third_party/devtools-frontend/src/front_end/panels/issues/AffectedMetadataAllowedSitesView.ts"],
  "sourcesContent": ["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport {AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n   *@description Label for the the number of affected `Allowed Sites` associated with a\n   *DevTools issue. In this context, `Allowed` refers to permission to access cookies\n   *via the third-party cookie deprecation global metadata, and `Site` is equivalent\n   *to eTLD+1.\n   *See https://developer.mozilla.org/en-US/docs/Glossary/eTLD.\n   */\n  nAllowedSites: '{n, plural, =1 {1 website allowed to access cookies} other {# websites allowed to access cookies}}',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedMetadataAllowedSitesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class AffectedMetadataAllowedSitesView extends AffectedResourcesView {\n  protected override getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nAllowedSites, {n: count});\n  }\n\n  override update(): void {\n    this.clear();\n    const issues = this.issue.getCookieDeprecationMetadataIssues();\n    let count = 0;\n\n    for (const issueData of issues) {\n      const row = document.createElement('tr');\n      row.classList.add('affected-resource-directive');\n\n      const textContentElement = document.createElement('div');\n      const textElement = document.createElement('span');\n      textElement.textContent = issueData.details().allowedSites.join(', ');\n      textContentElement.appendChild(textElement);\n\n      if (!issueData.details().isOptOutTopLevel && issueData.details().optOutPercentage > 0) {\n        const optOutTextElement = document.createElement('span');\n        optOutTextElement.textContent = ' (opt-out: ' + issueData.details().optOutPercentage + '% - ';\n        textContentElement.appendChild(optOutTextElement);\n\n        const linkElement = UI.XLink.XLink.create(\n            'https://developers.google.com/privacy-sandbox/blog/grace-period-opt-out', 'learn more');\n        textContentElement.appendChild(linkElement);\n\n        const endTextElement = document.createElement('span');\n        endTextElement.textContent = ')';\n        textContentElement.appendChild(endTextElement);\n      }\n\n      this.appendIssueDetailCell(row, textContentElement);\n      this.affectedResources.appendChild(row);\n      count++;\n    }\n    this.updateAffectedResourceCount(count);\n  }\n}\n"],
  "mappings": ";AAIA,YAAY,UAAU;AAEtB,YAAY,QAAQ;AAEpB,SAAQ,6BAA4B;AAEpC,MAAM,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQhB,eAAe;AACjB;AACA,MAAM,OAAO,KAAK,KAAK,kBAAkB,qDAAqD,SAAS;AACvG,MAAM,aAAa,KAAK,KAAK,mBAAmB,KAAK,QAAW,IAAI;AAE7D,aAAM,yCAAyC,sBAAsB;AAAA,EACvD,yBAAyB,OAAkD;AAC5F,WAAO,WAAW,UAAU,eAAe,EAAC,GAAG,MAAK,CAAC;AAAA,EACvD;AAAA,EAES,SAAe;AACtB,SAAK,MAAM;AACX,UAAM,SAAS,KAAK,MAAM,mCAAmC;AAC7D,QAAI,QAAQ;AAEZ,eAAW,aAAa,QAAQ;AAC9B,YAAM,MAAM,SAAS,cAAc,IAAI;AACvC,UAAI,UAAU,IAAI,6BAA6B;AAE/C,YAAM,qBAAqB,SAAS,cAAc,KAAK;AACvD,YAAM,cAAc,SAAS,cAAc,MAAM;AACjD,kBAAY,cAAc,UAAU,QAAQ,EAAE,aAAa,KAAK,IAAI;AACpE,yBAAmB,YAAY,WAAW;AAE1C,UAAI,CAAC,UAAU,QAAQ,EAAE,oBAAoB,UAAU,QAAQ,EAAE,mBAAmB,GAAG;AACrF,cAAM,oBAAoB,SAAS,cAAc,MAAM;AACvD,0BAAkB,cAAc,gBAAgB,UAAU,QAAQ,EAAE,mBAAmB;AACvF,2BAAmB,YAAY,iBAAiB;AAEhD,cAAM,cAAc,GAAG,MAAM,MAAM;AAAA,UAC/B;AAAA,UAA2E;AAAA,QAAY;AAC3F,2BAAmB,YAAY,WAAW;AAE1C,cAAM,iBAAiB,SAAS,cAAc,MAAM;AACpD,uBAAe,cAAc;AAC7B,2BAAmB,YAAY,cAAc;AAAA,MAC/C;AAEA,WAAK,sBAAsB,KAAK,kBAAkB;AAClD,WAAK,kBAAkB,YAAY,GAAG;AACtC;AAAA,IACF;AACA,SAAK,4BAA4B,KAAK;AAAA,EACxC;AACF;",
  "names": []
}
