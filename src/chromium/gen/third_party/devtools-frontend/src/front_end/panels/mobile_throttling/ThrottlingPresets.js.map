{
  "version": 3,
  "sources": ["../../../../../../../../../third_party/devtools-frontend/src/front_end/panels/mobile_throttling/ThrottlingPresets.ts"],
  "sourcesContent": ["// Copyright 2017 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\n\nconst UIStrings = {\n  /**\n   *@description Text for no network throttling\n   */\n  noThrottling: 'No CPU and no network throttling',\n  /**\n   *@description Text in Throttling Presets of the Network panel\n   */\n  noInternetConnectivity: 'No internet connectivity',\n  /**\n   *@description Text in Throttling Presets of the Network panel\n   */\n  lowendMobile: 'Low-end mobile',\n  /**\n   *@description Text in Throttling Presets of the Network panel\n   */\n  slowGXCpuSlowdown: 'Slow 3G & 6x CPU slowdown',\n  /**\n   *@description Text in Throttling Presets of the Network panel\n   */\n  midtierMobile: 'Mid-tier mobile',\n  /**\n   *@description Text in Throttling Presets of the Network panel\n   */\n  fastGXCpuSlowdown: 'Fast 3G & 4x CPU slowdown',\n  /**\n   *@description Text in Network Throttling Selector of the Network panel\n   */\n  custom: 'Custom',\n  /**\n   *@description Text in Throttling Presets of the Network panel\n   */\n  checkNetworkAndPerformancePanels: 'Check Network and Performance panels',\n};\n\nconst str_ = i18n.i18n.registerUIStrings('panels/mobile_throttling/ThrottlingPresets.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class ThrottlingPresets {\n  static getNoThrottlingConditions(): Conditions {\n    const title = typeof SDK.NetworkManager.NoThrottlingConditions.title === 'function' ?\n        SDK.NetworkManager.NoThrottlingConditions.title() :\n        SDK.NetworkManager.NoThrottlingConditions.title;\n    return {\n      title,\n      description: i18nString(UIStrings.noThrottling),\n      network: SDK.NetworkManager.NoThrottlingConditions,\n      cpuThrottlingRate: SDK.CPUThrottlingManager.CPUThrottlingRates.NO_THROTTLING,\n      jslogContext: 'no-throttling',\n    };\n  }\n\n  static getOfflineConditions(): Conditions {\n    const title = typeof SDK.NetworkManager.OfflineConditions.title === 'function' ?\n        SDK.NetworkManager.OfflineConditions.title() :\n        SDK.NetworkManager.OfflineConditions.title;\n    return {\n      title,\n      description: i18nString(UIStrings.noInternetConnectivity),\n      network: SDK.NetworkManager.OfflineConditions,\n      cpuThrottlingRate: SDK.CPUThrottlingManager.CPUThrottlingRates.NO_THROTTLING,\n      jslogContext: 'offline',\n    };\n  }\n\n  static getLowEndMobileConditions(): Conditions {\n    return {\n      title: i18nString(UIStrings.lowendMobile),\n      description: i18nString(UIStrings.slowGXCpuSlowdown),\n      network: SDK.NetworkManager.Slow3GConditions,\n      cpuThrottlingRate: SDK.CPUThrottlingManager.CPUThrottlingRates.LowEndMobile,\n      jslogContext: 'low-end-mobile',\n    };\n  }\n\n  static getMidTierMobileConditions(): Conditions {\n    return {\n      title: i18nString(UIStrings.midtierMobile),\n      description: i18nString(UIStrings.fastGXCpuSlowdown),\n      network: SDK.NetworkManager.Slow4GConditions,\n      cpuThrottlingRate: SDK.CPUThrottlingManager.CPUThrottlingRates.MidTierMobile,\n      jslogContext: 'mid-tier-mobile',\n    };\n  }\n\n  static getCustomConditions(): PlaceholderConditions {\n    return {\n      title: i18nString(UIStrings.custom),\n      description: i18nString(UIStrings.checkNetworkAndPerformancePanels),\n      jslogContext: 'custom',\n    };\n  }\n\n  static getMobilePresets(): (Conditions|PlaceholderConditions)[] {\n    return [\n      ThrottlingPresets.getMidTierMobileConditions(),\n      ThrottlingPresets.getLowEndMobileConditions(),\n      ThrottlingPresets.getCustomConditions(),\n    ];\n  }\n\n  static getAdvancedMobilePresets(): Conditions[] {\n    return [\n      ThrottlingPresets.getOfflineConditions(),\n    ];\n  }\n\n  static getRecommendedNetworkPreset(rtt: number): SDK.NetworkManager.Conditions|null {\n    const RTT_COMPARISON_THRESHOLD = 200;\n    const RTT_MINIMUM = 60;\n\n    if (!Number.isFinite(rtt)) {\n      return null;\n    }\n\n    if (rtt < RTT_MINIMUM) {\n      return null;\n    }\n\n    let closestPreset: SDK.NetworkManager.Conditions|null = null;\n    let smallestDiff = Infinity;\n    for (const preset of ThrottlingPresets.networkPresets) {\n      const {targetLatency} = preset;\n      if (!targetLatency) {\n        continue;\n      }\n\n      const diff = Math.abs(targetLatency - rtt);\n      if (diff > RTT_COMPARISON_THRESHOLD) {\n        continue;\n      }\n\n      if (smallestDiff < diff) {\n        continue;\n      }\n\n      closestPreset = preset;\n      smallestDiff = diff;\n    }\n\n    return closestPreset;\n  }\n\n  static networkPresets: SDK.NetworkManager.Conditions[] = [\n    SDK.NetworkManager.Fast4GConditions,\n    SDK.NetworkManager.Slow4GConditions,\n    SDK.NetworkManager.Slow3GConditions,\n    SDK.NetworkManager.OfflineConditions,\n  ];\n\n  static cpuThrottlingPresets: SDK.CPUThrottlingManager.CPUThrottlingRates[] = [\n    SDK.CPUThrottlingManager.CPUThrottlingRates.NO_THROTTLING,\n    SDK.CPUThrottlingManager.CPUThrottlingRates.MidTierMobile,\n    SDK.CPUThrottlingManager.CPUThrottlingRates.LowEndMobile,\n    SDK.CPUThrottlingManager.CPUThrottlingRates.EXTRA_SLOW,\n  ];\n}\n\n// @ts-ignore exported for Tests.js\nglobalThis.MobileThrottling = globalThis.MobileThrottling || {};\n// @ts-ignore exported for Tests.js\nglobalThis.MobileThrottling.networkPresets = ThrottlingPresets.networkPresets;\n\nexport interface Conditions {\n  title: string;\n  description: string;\n  network: SDK.NetworkManager.Conditions;\n  cpuThrottlingRate: number;\n  jslogContext?: string;\n}\n\nexport interface NetworkThrottlingConditionsGroup {\n  title: string;\n  items: SDK.NetworkManager.Conditions[];\n}\n\nexport interface MobileThrottlingConditionsGroup {\n  title: string;\n  items: (Conditions|PlaceholderConditions)[];\n}\n\nexport type ConditionsList = (Conditions|PlaceholderConditions|null)[];\n\nexport interface PlaceholderConditions {\n  title: string;\n  description: string;\n  jslogContext?: string;\n}\n"],
  "mappings": "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",
  "names": []
}
