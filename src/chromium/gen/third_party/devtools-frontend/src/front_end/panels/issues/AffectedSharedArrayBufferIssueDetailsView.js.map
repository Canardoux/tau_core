{
  "version": 3,
  "sources": ["../../../../../../../../../third_party/devtools-frontend/src/front_end/panels/issues/AffectedSharedArrayBufferIssueDetailsView.ts"],
  "sourcesContent": ["// Copyright 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\nimport * as Protocol from '../../generated/protocol.js';\n\nimport {AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n   *@description Label for number of affected resources indication in issue view\n   */\n  nViolations: '{n, plural, =1 {# violation} other {# violations}}',\n  /**\n   *@description Value for the status column in SharedArrayBuffer issues\n   */\n  warning: 'warning',\n  /**\n   *@description The kind of resolution for a mixed content issue\n   */\n  blocked: 'blocked',\n  /**\n   *@description Value for the 'Trigger' column in the SAB affected resources list\n   */\n  instantiation: 'Instantiation',\n  /**\n   *@description Tooltip for the 'Trigger' column in the SAB affected resources list\n   */\n  aSharedarraybufferWas: 'A `SharedArrayBuffer` was instantiated in a context that is not cross-origin isolated',\n  /**\n   *@description Value for the 'Trigger' column in the SAB affected resources list\n   */\n  transfer: 'Transfer',\n  /**\n   *@description Tooltip for the 'Trigger' column in the SAB affected resources list\n   */\n  sharedarraybufferWasTransferedTo: '`SharedArrayBuffer` was transfered to a context that is not cross-origin isolated',\n  /**\n   *@description Header for the source location column\n   */\n  sourceLocation: 'Source Location',\n  /**\n   *@description Title for the 'Trigger' column in the SAB affected resources list\n   */\n  trigger: 'Trigger',\n  /**\n   *@description Title for the status column in the SAB affected resources list\n   */\n  status: 'Status',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedSharedArrayBufferIssueDetailsView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class AffectedSharedArrayBufferIssueDetailsView extends AffectedResourcesView {\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nViolations, {n: count});\n  }\n\n  #appendStatus(element: HTMLElement, isWarning: boolean): void {\n    const status = document.createElement('td');\n    if (isWarning) {\n      status.classList.add('affected-resource-report-only-status');\n      status.textContent = i18nString(UIStrings.warning);\n    } else {\n      status.classList.add('affected-resource-blocked-status');\n      status.textContent = i18nString(UIStrings.blocked);\n    }\n    element.appendChild(status);\n  }\n\n  #appendType(element: HTMLElement, type: Protocol.Audits.SharedArrayBufferIssueType): void {\n    const status = document.createElement('td');\n    switch (type) {\n      case Protocol.Audits.SharedArrayBufferIssueType.CreationIssue:\n        status.textContent = i18nString(UIStrings.instantiation);\n        status.title = i18nString(UIStrings.aSharedarraybufferWas);\n        break;\n      case Protocol.Audits.SharedArrayBufferIssueType.TransferIssue:\n        status.textContent = i18nString(UIStrings.transfer);\n        status.title = i18nString(UIStrings.sharedarraybufferWasTransferedTo);\n        break;\n    }\n    element.appendChild(status);\n  }\n\n  #appendDetails(sabIssues: Iterable<IssuesManager.SharedArrayBufferIssue.SharedArrayBufferIssue>): void {\n    const header = document.createElement('tr');\n    this.appendColumnTitle(header, i18nString(UIStrings.sourceLocation));\n    this.appendColumnTitle(header, i18nString(UIStrings.trigger));\n    this.appendColumnTitle(header, i18nString(UIStrings.status));\n\n    this.affectedResources.appendChild(header);\n    let count = 0;\n    for (const sabIssue of sabIssues) {\n      count++;\n      this.#appendDetail(sabIssue);\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  #appendDetail(sabIssue: IssuesManager.SharedArrayBufferIssue.SharedArrayBufferIssue): void {\n    const element = document.createElement('tr');\n    element.classList.add('affected-resource-directive');\n\n    const sabIssueDetails = sabIssue.details();\n    const location = IssuesManager.Issue.toZeroBasedLocation(sabIssueDetails.sourceCodeLocation);\n    this.appendSourceLocation(element, location, sabIssue.model()?.getTargetIfNotDisposed());\n    this.#appendType(element, sabIssueDetails.type);\n    this.#appendStatus(element, sabIssueDetails.isWarning);\n\n    this.affectedResources.appendChild(element);\n  }\n\n  update(): void {\n    this.clear();\n    this.#appendDetails(this.issue.getSharedArrayBufferIssues());\n  }\n}\n"],
  "mappings": ";AAIA,YAAY,UAAU;AAEtB,YAAY,mBAAmB;AAC/B,YAAY,cAAc;AAE1B,SAAQ,6BAA4B;AAEpC,MAAM,YAAY;AAAA;AAAA;AAAA;AAAA,EAIhB,aAAa;AAAA;AAAA;AAAA;AAAA,EAIb,SAAS;AAAA;AAAA;AAAA;AAAA,EAIT,SAAS;AAAA;AAAA;AAAA;AAAA,EAIT,eAAe;AAAA;AAAA;AAAA;AAAA,EAIf,uBAAuB;AAAA;AAAA;AAAA;AAAA,EAIvB,UAAU;AAAA;AAAA;AAAA;AAAA,EAIV,kCAAkC;AAAA;AAAA;AAAA;AAAA,EAIlC,gBAAgB;AAAA;AAAA;AAAA;AAAA,EAIhB,SAAS;AAAA;AAAA;AAAA;AAAA,EAIT,QAAQ;AACV;AACA,MAAM,OAAO,KAAK,KAAK,kBAAkB,8DAA8D,SAAS;AAChH,MAAM,aAAa,KAAK,KAAK,mBAAmB,KAAK,QAAW,IAAI;AAC7D,aAAM,kDAAkD,sBAAsB;AAAA,EACzE,yBAAyB,OAAkD;AACnF,WAAO,WAAW,UAAU,aAAa,EAAC,GAAG,MAAK,CAAC;AAAA,EACrD;AAAA,EAEA,cAAc,SAAsB,WAA0B;AAC5D,UAAM,SAAS,SAAS,cAAc,IAAI;AAC1C,QAAI,WAAW;AACb,aAAO,UAAU,IAAI,sCAAsC;AAC3D,aAAO,cAAc,WAAW,UAAU,OAAO;AAAA,IACnD,OAAO;AACL,aAAO,UAAU,IAAI,kCAAkC;AACvD,aAAO,cAAc,WAAW,UAAU,OAAO;AAAA,IACnD;AACA,YAAQ,YAAY,MAAM;AAAA,EAC5B;AAAA,EAEA,YAAY,SAAsB,MAAwD;AACxF,UAAM,SAAS,SAAS,cAAc,IAAI;AAC1C,YAAQ,MAAM;AAAA,MACZ,KAAK,SAAS,OAAO,2BAA2B;AAC9C,eAAO,cAAc,WAAW,UAAU,aAAa;AACvD,eAAO,QAAQ,WAAW,UAAU,qBAAqB;AACzD;AAAA,MACF,KAAK,SAAS,OAAO,2BAA2B;AAC9C,eAAO,cAAc,WAAW,UAAU,QAAQ;AAClD,eAAO,QAAQ,WAAW,UAAU,gCAAgC;AACpE;AAAA,IACJ;AACA,YAAQ,YAAY,MAAM;AAAA,EAC5B;AAAA,EAEA,eAAe,WAAwF;AACrG,UAAM,SAAS,SAAS,cAAc,IAAI;AAC1C,SAAK,kBAAkB,QAAQ,WAAW,UAAU,cAAc,CAAC;AACnE,SAAK,kBAAkB,QAAQ,WAAW,UAAU,OAAO,CAAC;AAC5D,SAAK,kBAAkB,QAAQ,WAAW,UAAU,MAAM,CAAC;AAE3D,SAAK,kBAAkB,YAAY,MAAM;AACzC,QAAI,QAAQ;AACZ,eAAW,YAAY,WAAW;AAChC;AACA,WAAK,cAAc,QAAQ;AAAA,IAC7B;AACA,SAAK,4BAA4B,KAAK;AAAA,EACxC;AAAA,EAEA,cAAc,UAA6E;AACzF,UAAM,UAAU,SAAS,cAAc,IAAI;AAC3C,YAAQ,UAAU,IAAI,6BAA6B;AAEnD,UAAM,kBAAkB,SAAS,QAAQ;AACzC,UAAM,WAAW,cAAc,MAAM,oBAAoB,gBAAgB,kBAAkB;AAC3F,SAAK,qBAAqB,SAAS,UAAU,SAAS,MAAM,GAAG,uBAAuB,CAAC;AACvF,SAAK,YAAY,SAAS,gBAAgB,IAAI;AAC9C,SAAK,cAAc,SAAS,gBAAgB,SAAS;AAErD,SAAK,kBAAkB,YAAY,OAAO;AAAA,EAC5C;AAAA,EAEA,SAAe;AACb,SAAK,MAAM;AACX,SAAK,eAAe,KAAK,MAAM,2BAA2B,CAAC;AAAA,EAC7D;AACF;",
  "names": []
}
