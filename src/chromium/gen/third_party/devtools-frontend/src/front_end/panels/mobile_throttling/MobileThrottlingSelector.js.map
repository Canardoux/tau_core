{
  "version": 3,
  "sources": ["../../../../../../../../../third_party/devtools-frontend/src/front_end/panels/mobile_throttling/MobileThrottlingSelector.ts"],
  "sourcesContent": ["// Copyright 2017 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\n\nimport {throttlingManager} from './ThrottlingManager.js';\n\nimport {\n  ThrottlingPresets,\n  type Conditions,\n  type ConditionsList,\n  type MobileThrottlingConditionsGroup,\n} from './ThrottlingPresets.js';\n\nconst UIStrings = {\n  /**\n   *@description Mobile throttling is disabled. The user can select this option to run mobile\n   *emulation at a normal speed instead of throttled.\n   */\n  disabled: 'Disabled',\n  /**\n   *@description Title for a group of pre-decided configuration options for mobile throttling. These\n   *are useful default options that users might want.\n   */\n  presets: 'Presets',\n  /**\n   *@description Title for a group of advanced configuration options for mobile throttling, which\n   *might not be applicable to every user or situation.\n   */\n  advanced: 'Advanced',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/mobile_throttling/MobileThrottlingSelector.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class MobileThrottlingSelector {\n  private readonly populateCallback: (arg0: Array<MobileThrottlingConditionsGroup>) => ConditionsList;\n  private readonly selectCallback: (arg0: number) => void;\n  private readonly options: ConditionsList;\n\n  constructor(\n      populateCallback: (arg0: Array<MobileThrottlingConditionsGroup>) => ConditionsList,\n      selectCallback: (arg0: number) => void) {\n    this.populateCallback = populateCallback;\n    this.selectCallback = selectCallback;\n    SDK.CPUThrottlingManager.CPUThrottlingManager.instance().addEventListener(\n        SDK.CPUThrottlingManager.Events.RATE_CHANGED, this.conditionsChanged, this);\n    SDK.NetworkManager.MultitargetNetworkManager.instance().addEventListener(\n        SDK.NetworkManager.MultitargetNetworkManager.Events.CONDITIONS_CHANGED, this.conditionsChanged, this);\n    this.options = this.populateOptions();\n    this.conditionsChanged();\n  }\n\n  optionSelected(conditions: Conditions): void {\n    SDK.NetworkManager.MultitargetNetworkManager.instance().setNetworkConditions(conditions.network);\n    throttlingManager().setCPUThrottlingRate(conditions.cpuThrottlingRate);\n  }\n\n  private populateOptions(): ConditionsList {\n    const disabledGroup = {\n      title: i18nString(UIStrings.disabled),\n      items: [ThrottlingPresets.getNoThrottlingConditions()],\n    };\n    const presetsGroup = {title: i18nString(UIStrings.presets), items: ThrottlingPresets.getMobilePresets()};\n    const advancedGroup = {title: i18nString(UIStrings.advanced), items: ThrottlingPresets.getAdvancedMobilePresets()};\n    return this.populateCallback([disabledGroup, presetsGroup, advancedGroup]);\n  }\n\n  private conditionsChanged(): void {\n    const networkConditions = SDK.NetworkManager.MultitargetNetworkManager.instance().networkConditions();\n    const cpuThrottlingRate = SDK.CPUThrottlingManager.CPUThrottlingManager.instance().cpuThrottlingRate();\n    for (let index = 0; index < this.options.length; ++index) {\n      const option = this.options[index];\n      if (option && 'network' in option && option.network === networkConditions &&\n          option.cpuThrottlingRate === cpuThrottlingRate) {\n        this.selectCallback(index);\n        return;\n      }\n    }\n\n    const customConditions = ThrottlingPresets.getCustomConditions();\n    for (let index = 0; index < this.options.length; ++index) {\n      const item = this.options[index];\n      if (item && item.title === customConditions.title && item.description === customConditions.description) {\n        this.selectCallback(index);\n        return;\n      }\n    }\n  }\n}\n"],
  "mappings": ";AAIA,YAAY,UAAU;AACtB,YAAY,SAAS;AAErB,SAAQ,yBAAwB;AAEhC;AAAA,EACE;AAAA,OAIK;AAEP,MAAM,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,EAKhB,UAAU;AAAA;AAAA;AAAA;AAAA;AAAA,EAKV,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,EAKT,UAAU;AACZ;AACA,MAAM,OAAO,KAAK,KAAK,kBAAkB,wDAAwD,SAAS;AAC1G,MAAM,aAAa,KAAK,KAAK,mBAAmB,KAAK,QAAW,IAAI;AAE7D,aAAM,yBAAyB;AAAA,EACnB;AAAA,EACA;AAAA,EACA;AAAA,EAEjB,YACI,kBACA,gBAAwC;AAC1C,SAAK,mBAAmB;AACxB,SAAK,iBAAiB;AACtB,QAAI,qBAAqB,qBAAqB,SAAS,EAAE;AAAA,MACrD,IAAI,qBAAqB,OAAO;AAAA,MAAc,KAAK;AAAA,MAAmB;AAAA,IAAI;AAC9E,QAAI,eAAe,0BAA0B,SAAS,EAAE;AAAA,MACpD,IAAI,eAAe,0BAA0B,OAAO;AAAA,MAAoB,KAAK;AAAA,MAAmB;AAAA,IAAI;AACxG,SAAK,UAAU,KAAK,gBAAgB;AACpC,SAAK,kBAAkB;AAAA,EACzB;AAAA,EAEA,eAAe,YAA8B;AAC3C,QAAI,eAAe,0BAA0B,SAAS,EAAE,qBAAqB,WAAW,OAAO;AAC/F,sBAAkB,EAAE,qBAAqB,WAAW,iBAAiB;AAAA,EACvE;AAAA,EAEQ,kBAAkC;AACxC,UAAM,gBAAgB;AAAA,MACpB,OAAO,WAAW,UAAU,QAAQ;AAAA,MACpC,OAAO,CAAC,kBAAkB,0BAA0B,CAAC;AAAA,IACvD;AACA,UAAM,eAAe,EAAC,OAAO,WAAW,UAAU,OAAO,GAAG,OAAO,kBAAkB,iBAAiB,EAAC;AACvG,UAAM,gBAAgB,EAAC,OAAO,WAAW,UAAU,QAAQ,GAAG,OAAO,kBAAkB,yBAAyB,EAAC;AACjH,WAAO,KAAK,iBAAiB,CAAC,eAAe,cAAc,aAAa,CAAC;AAAA,EAC3E;AAAA,EAEQ,oBAA0B;AAChC,UAAM,oBAAoB,IAAI,eAAe,0BAA0B,SAAS,EAAE,kBAAkB;AACpG,UAAM,oBAAoB,IAAI,qBAAqB,qBAAqB,SAAS,EAAE,kBAAkB;AACrG,aAAS,QAAQ,GAAG,QAAQ,KAAK,QAAQ,QAAQ,EAAE,OAAO;AACxD,YAAM,SAAS,KAAK,QAAQ,KAAK;AACjC,UAAI,UAAU,aAAa,UAAU,OAAO,YAAY,qBACpD,OAAO,sBAAsB,mBAAmB;AAClD,aAAK,eAAe,KAAK;AACzB;AAAA,MACF;AAAA,IACF;AAEA,UAAM,mBAAmB,kBAAkB,oBAAoB;AAC/D,aAAS,QAAQ,GAAG,QAAQ,KAAK,QAAQ,QAAQ,EAAE,OAAO;AACxD,YAAM,OAAO,KAAK,QAAQ,KAAK;AAC/B,UAAI,QAAQ,KAAK,UAAU,iBAAiB,SAAS,KAAK,gBAAgB,iBAAiB,aAAa;AACtG,aAAK,eAAe,KAAK;AACzB;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;",
  "names": []
}
