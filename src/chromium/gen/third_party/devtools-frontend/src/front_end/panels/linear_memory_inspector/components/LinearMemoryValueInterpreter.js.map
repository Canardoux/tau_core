{
  "version": 3,
  "sources": ["../../../../../../../../../../third_party/devtools-frontend/src/front_end/panels/linear_memory_inspector/components/LinearMemoryValueInterpreter.ts"],
  "sourcesContent": ["// Copyright (c) 2020 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../ui/components/icon_button/icon_button.js';\nimport './ValueInterpreterDisplay.js';\nimport './ValueInterpreterSettings.js';\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport linearMemoryValueInterpreterStyles from './linearMemoryValueInterpreter.css.js';\nimport {Endianness, type ValueType, type ValueTypeMode} from './ValueInterpreterDisplayUtils.js';\nimport type {TypeToggleEvent} from './ValueInterpreterSettings.js';\n\nconst UIStrings = {\n  /**\n   *@description Tooltip text that appears when hovering over the gear button to open and close settings in the Linear memory inspector. These settings\n   *             allow the user to change the value type to view, such as 32-bit Integer, or 32-bit Float.\n   */\n  toggleValueTypeSettings: 'Toggle value type settings',\n  /**\n   *@description Tooltip text that appears when hovering over the 'Little Endian' or 'Big Endian' setting in the Linear memory inspector.\n   */\n  changeEndianness: 'Change `Endianness`',\n};\nconst str_ =\n    i18n.i18n.registerUIStrings('panels/linear_memory_inspector/components/LinearMemoryValueInterpreter.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst {render, html} = LitHtml;\n\nexport class EndiannessChangedEvent extends Event {\n  static readonly eventName = 'endiannesschanged';\n  data: Endianness;\n\n  constructor(endianness: Endianness) {\n    super(EndiannessChangedEvent.eventName);\n    this.data = endianness;\n  }\n}\n\nexport class ValueTypeToggledEvent extends Event {\n  static readonly eventName = 'valuetypetoggled';\n  data: {type: ValueType, checked: boolean};\n\n  constructor(type: ValueType, checked: boolean) {\n    super(ValueTypeToggledEvent.eventName);\n    this.data = {type, checked};\n  }\n}\n\nexport interface LinearMemoryValueInterpreterData {\n  value: ArrayBuffer;\n  valueTypes: Set<ValueType>;\n  endianness: Endianness;\n  valueTypeModes?: Map<ValueType, ValueTypeMode>;\n  memoryLength: number;\n}\n\nexport class LinearMemoryValueInterpreter extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #endianness = Endianness.LITTLE;\n  #buffer = new ArrayBuffer(0);\n  #valueTypes: Set<ValueType> = new Set();\n  #valueTypeModeConfig: Map<ValueType, ValueTypeMode> = new Map();\n  #memoryLength = 0;\n  #showSettings = false;\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [linearMemoryValueInterpreterStyles];\n  }\n\n  set data(data: LinearMemoryValueInterpreterData) {\n    this.#endianness = data.endianness;\n    this.#buffer = data.value;\n    this.#valueTypes = data.valueTypes;\n    this.#valueTypeModeConfig = data.valueTypeModes || new Map();\n    this.#memoryLength = data.memoryLength;\n    this.#render();\n  }\n\n  #render(): void {\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    render(html`\n      <div class=\"value-interpreter\">\n        <div class=\"settings-toolbar\">\n          ${this.#renderEndiannessSetting()}\n          <button data-settings=\"true\" class=\"settings-toolbar-button ${this.#showSettings ? 'active' : ''}\"\n              title=${i18nString(UIStrings.toggleValueTypeSettings)} @click=${this.#onSettingsToggle}\n              jslog=${VisualLogging.toggleSubpane('linear-memory-inspector.toggle-value-settings').track({click: true})}>\n            <devtools-icon name=${this.#showSettings ? 'gear-filled' : 'gear'}></devtools-icon>\n          </button>\n        </div>\n        <span class=\"divider\"></span>\n        <div>\n          ${this.#showSettings ?\n            html`\n              <devtools-linear-memory-inspector-interpreter-settings\n                .data=${{ valueTypes: this.#valueTypes }}\n                @typetoggle=${this.#onTypeToggle}>\n              </devtools-linear-memory-inspector-interpreter-settings>` :\n            html`\n              <devtools-linear-memory-inspector-interpreter-display\n                .data=${{\n                  buffer: this.#buffer,\n                  valueTypes: this.#valueTypes,\n                  endianness: this.#endianness,\n                  valueTypeModes: this.#valueTypeModeConfig,\n                  memoryLength: this.#memoryLength,\n                }}>\n              </devtools-linear-memory-inspector-interpreter-display>`}\n        </div>\n      </div>\n    `,\n      this.#shadow, { host: this },\n    );\n    // clang-format on\n  }\n\n  #onEndiannessChange(event: Event): void {\n    event.preventDefault();\n    const select = event.target as HTMLInputElement;\n    const endianness = select.value as Endianness;\n    this.dispatchEvent(new EndiannessChangedEvent(endianness));\n  }\n\n  #renderEndiannessSetting(): LitHtml.TemplateResult {\n    const onEnumSettingChange = this.#onEndiannessChange.bind(this);\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    return html`\n    <label data-endianness-setting=\"true\" title=${i18nString(UIStrings.changeEndianness)}>\n      <select class=\"chrome-select\"\n        jslog=${VisualLogging.dropDown('linear-memory-inspector.endianess').track({change: true})}\n        style=\"border: none; background-color: transparent; cursor: pointer;\"\n        data-endianness=\"true\" @change=${onEnumSettingChange}>\n        ${[Endianness.LITTLE, Endianness.BIG].map(endianness => {\n            return html`<option value=${endianness} .selected=${this.#endianness === endianness}\n            jslog=${VisualLogging.item(Platform.StringUtilities.toKebabCase(endianness)).track({click: true})}>${\n                i18n.i18n.lockedString(endianness)}</option>`;\n        })}\n      </select>\n    </label>\n    `;\n    // clang-format on\n  }\n\n  #onSettingsToggle(): void {\n    this.#showSettings = !this.#showSettings;\n    this.#render();\n  }\n\n  #onTypeToggle(e: TypeToggleEvent): void {\n    this.dispatchEvent(new ValueTypeToggledEvent(e.data.type, e.data.checked));\n  }\n}\n\ncustomElements.define('devtools-linear-memory-inspector-interpreter', LinearMemoryValueInterpreter);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-linear-memory-inspector-interpreter': LinearMemoryValueInterpreter;\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
