{
  "version": 3,
  "sources": ["../../../../../../../../../../third_party/devtools-frontend/src/front_end/panels/elements/components/AnchorFunctionLinkSwatch.ts"],
  "sourcesContent": ["// Copyright (c) 2024 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\nimport '../../../ui/components/icon_button/icon_button.js';\nimport '../../../ui/legacy/components/inline_editor/inline_editor.js';\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport type * as SDK from '../../../core/sdk/sdk.js';\nimport type * as InlineEditor from '../../../ui/legacy/components/inline_editor/inline_editor.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport anchorFunctionLinkSwatchStyles from './anchorFunctionLinkSwatch.css.js';\n\nconst UIStrings = {\n  /**\n   *@description Title in the styles tab for the icon button for jumping to the anchor node.\n   */\n  jumpToAnchorNode: 'Jump to anchor node',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/elements/components/AnchorFunctionLinkSwatch.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst {render, html} = LitHtml;\n\n// Clang format is messing up the formatting of the functions below. It's best\n// to leave formatting off for this type declaration.\n// clang-format off\nexport type AnchorFunctionLinkSwatchData = {\n  onLinkActivate: () => void,\n  onMouseEnter: () => void,\n  onMouseLeave: () => void,\n  // The dashed identifier for the anchor function.\n  // It is undefined when we're rendering for implicit or default anchor cases.\n  identifier?: string,\n  // The anchor node, it is undefined when it is not resolved correctly.\n  anchorNode?: SDK.DOMModel.DOMNode,\n  // Whether to add a space after the link or not. This is needed because for some cases,\n  // even though the link swatch is created; there might not be any links rendered for it.\n  // So adding the space from the outside causes an unnecessary space to be rendered for these cases.\n  // That's the reason we're controlling space behavior from the inside.\n  // However for `position-anchor: --dashed-ident` case, there is no space needed at all.\n  // That's why we need the parameter so that we don't render a space for that case.\n  needsSpace?: boolean,\n};\n// clang-format on\n\nexport class AnchorFunctionLinkSwatch extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #data: AnchorFunctionLinkSwatchData;\n\n  constructor(data: AnchorFunctionLinkSwatchData) {\n    super();\n    this.#data = data;\n  }\n\n  dataForTest(): AnchorFunctionLinkSwatchData {\n    return this.#data;\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [anchorFunctionLinkSwatchStyles];\n    this.render();\n  }\n\n  set data(data: AnchorFunctionLinkSwatchData) {\n    this.#data = data;\n    this.render();\n  }\n\n  #handleIconClick(ev: MouseEvent): void {\n    ev.stopPropagation();\n    this.#data.onLinkActivate();\n  }\n\n  #renderIdentifierLink(): LitHtml.LitTemplate {\n    // clang-format off\n    return html`<devtools-link-swatch\n      @mouseenter=${this.#data.onMouseEnter}\n      @mouseleave=${this.#data.onMouseLeave}\n      .data=${{\n        text: this.#data.identifier,\n        isDefined: Boolean(this.#data.anchorNode),\n        jslogContext: 'anchor-link',\n        onLinkActivate: this.#data.onLinkActivate,\n      } as InlineEditor.LinkSwatch.LinkSwatchRenderData}></devtools-link-swatch>`;\n    // clang-format on\n  }\n\n  #renderIconLink(): LitHtml.LitTemplate {\n    // clang-format off\n    return html`<devtools-icon\n      role='button'\n      title=${i18nString(UIStrings.jumpToAnchorNode)}\n      class='icon-link'\n      name='open-externally'\n      jslog=${VisualLogging.action('jump-to-anchor-node').track({click: true})}\n      @mouseenter=${this.#data.onMouseEnter}\n      @mouseleave=${this.#data.onMouseLeave}\n      @mousedown=${(ev: MouseEvent) => ev.stopPropagation()}\n      @click=${this.#handleIconClick}\n    ></devtools-icon>`;\n    // clang-format on\n  }\n\n  protected render(): void {\n    if (!this.#data.identifier && !this.#data.anchorNode) {\n      return;\n    }\n\n    if (this.#data.identifier) {\n      // clang-format off\n      render(html`${this.#renderIdentifierLink()}${this.#data.needsSpace ? ' ' : ''}`, this.#shadow, {host: this});\n      // clang-format on\n    } else {\n      // clang-format off\n      render(html`${this.#renderIconLink()}${this.#data.needsSpace ? ' ' : ''}`, this.#shadow, {host: this});\n      // clang-format on\n    }\n  }\n}\n\ncustomElements.define('devtools-anchor-function-link-swatch', AnchorFunctionLinkSwatch);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-anchor-function-link-swatch': AnchorFunctionLinkSwatch;\n  }\n}\n"],
  "mappings": ";AAGA,OAAO;AACP,OAAO;AAEP,YAAY,UAAU;AAGtB,YAAY,aAAa;AACzB,YAAY,mBAAmB;AAE/B,OAAO,oCAAoC;AAE3C,MAAM,YAAY;AAAA;AAAA;AAAA;AAAA,EAIhB,kBAAkB;AACpB;AACA,MAAM,OAAO,KAAK,KAAK,kBAAkB,0DAA0D,SAAS;AAC5G,MAAM,aAAa,KAAK,KAAK,mBAAmB,KAAK,QAAW,IAAI;AACpE,MAAM,EAAC,QAAQ,KAAI,IAAI;AAwBhB,aAAM,iCAAiC,YAAY;AAAA,EAC/C,UAAU,KAAK,aAAa,EAAC,MAAM,OAAM,CAAC;AAAA,EACnD;AAAA,EAEA,YAAY,MAAoC;AAC9C,UAAM;AACN,SAAK,QAAQ;AAAA,EACf;AAAA,EAEA,cAA4C;AAC1C,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,oBAA0B;AACxB,SAAK,QAAQ,qBAAqB,CAAC,8BAA8B;AACjE,SAAK,OAAO;AAAA,EACd;AAAA,EAEA,IAAI,KAAK,MAAoC;AAC3C,SAAK,QAAQ;AACb,SAAK,OAAO;AAAA,EACd;AAAA,EAEA,iBAAiB,IAAsB;AACrC,OAAG,gBAAgB;AACnB,SAAK,MAAM,eAAe;AAAA,EAC5B;AAAA,EAEA,wBAA6C;AAE3C,WAAO;AAAA,oBACS,KAAK,MAAM,YAAY;AAAA,oBACvB,KAAK,MAAM,YAAY;AAAA,cAC7B;AAAA,MACN,MAAM,KAAK,MAAM;AAAA,MACjB,WAAW,QAAQ,KAAK,MAAM,UAAU;AAAA,MACxC,cAAc;AAAA,MACd,gBAAgB,KAAK,MAAM;AAAA,IAC7B,CAAiD;AAAA,EAErD;AAAA,EAEA,kBAAuC;AAErC,WAAO;AAAA;AAAA,cAEG,WAAW,UAAU,gBAAgB,CAAC;AAAA;AAAA;AAAA,cAGtC,cAAc,OAAO,qBAAqB,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC;AAAA,oBAC1D,KAAK,MAAM,YAAY;AAAA,oBACvB,KAAK,MAAM,YAAY;AAAA,mBACxB,CAAC,OAAmB,GAAG,gBAAgB,CAAC;AAAA,eAC5C,KAAK,gBAAgB;AAAA;AAAA,EAGlC;AAAA,EAEU,SAAe;AACvB,QAAI,CAAC,KAAK,MAAM,cAAc,CAAC,KAAK,MAAM,YAAY;AACpD;AAAA,IACF;AAEA,QAAI,KAAK,MAAM,YAAY;AAEzB,aAAO,OAAO,KAAK,sBAAsB,CAAC,GAAG,KAAK,MAAM,aAAa,MAAM,EAAE,IAAI,KAAK,SAAS,EAAC,MAAM,KAAI,CAAC;AAAA,IAE7G,OAAO;AAEL,aAAO,OAAO,KAAK,gBAAgB,CAAC,GAAG,KAAK,MAAM,aAAa,MAAM,EAAE,IAAI,KAAK,SAAS,EAAC,MAAM,KAAI,CAAC;AAAA,IAEvG;AAAA,EACF;AACF;AAEA,eAAe,OAAO,wCAAwC,wBAAwB;",
  "names": []
}
