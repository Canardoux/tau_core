{
  "version": 3,
  "sources": ["../../../../../../../../../../third_party/devtools-frontend/src/front_end/panels/elements/components/StylePropertyEditor.ts"],
  "sourcesContent": ["// Copyright (c) 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../ui/components/icon_button/icon_button.js';\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport {findFlexContainerIcon, findGridContainerIcon, type IconInfo} from './CSSPropertyIconResolver.js';\nimport stylePropertyEditorStyles from './stylePropertyEditor.css.js';\n\nconst UIStrings = {\n  /**\n   * @description Title of the button that selects a flex property.\n   * @example {flex-direction} propertyName\n   * @example {column} propertyValue\n   */\n  selectButton: 'Add {propertyName}: {propertyValue}',\n  /**\n   * @description Title of the button that deselects a flex property.\n   * @example {flex-direction} propertyName\n   * @example {row} propertyValue\n   */\n  deselectButton: 'Remove {propertyName}: {propertyValue}',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/elements/components/StylePropertyEditor.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nconst {render, html, Directives} = LitHtml;\n\ndeclare global {\n  interface HTMLElementEventMap {\n    'propertyselected': PropertySelectedEvent;\n    'propertydeselected': PropertyDeselectedEvent;\n  }\n}\n\ninterface FlexEditorData {\n  authoredProperties: Map<string, string>;\n  computedProperties: Map<string, string>;\n}\n\ninterface EditableProperty {\n  propertyName: string;\n  propertyValues: string[];\n}\n\nexport class PropertySelectedEvent extends Event {\n  static readonly eventName = 'propertyselected';\n  data: {name: string, value: string};\n\n  constructor(name: string, value: string) {\n    super(PropertySelectedEvent.eventName, {});\n    this.data = {name, value};\n  }\n}\n\nexport class PropertyDeselectedEvent extends Event {\n  static readonly eventName = 'propertydeselected';\n  data: {name: string, value: string};\n\n  constructor(name: string, value: string) {\n    super(PropertyDeselectedEvent.eventName, {});\n    this.data = {name, value};\n  }\n}\n\nexport class StylePropertyEditor extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #authoredProperties: Map<string, string> = new Map();\n  #computedProperties: Map<string, string> = new Map();\n  protected readonly editableProperties: EditableProperty[] = [];\n\n  constructor() {\n    super();\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [stylePropertyEditorStyles];\n  }\n\n  getEditableProperties(): EditableProperty[] {\n    return this.editableProperties;\n  }\n\n  set data(data: FlexEditorData) {\n    this.#authoredProperties = data.authoredProperties;\n    this.#computedProperties = data.computedProperties;\n    this.#render();\n  }\n\n  #render(): void {\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    render(html`\n      <div class=\"container\">\n        ${this.editableProperties.map(prop => this.#renderProperty(prop))}\n      </div>\n    `, this.#shadow, {\n      host: this,\n    });\n    // clang-format on\n  }\n\n  #renderProperty(prop: EditableProperty): LitHtml.TemplateResult {\n    const authoredValue = this.#authoredProperties.get(prop.propertyName);\n    const notAuthored = !authoredValue;\n    const shownValue = authoredValue || this.#computedProperties.get(prop.propertyName);\n    const classes = Directives.classMap({\n      'property-value': true,\n      'not-authored': notAuthored,\n    });\n    return html`<div class=\"row\">\n      <div class=\"property\">\n        <span class=\"property-name\">${prop.propertyName}</span>: <span class=${classes}>${shownValue}</span>\n      </div>\n      <div class=\"buttons\">\n        ${prop.propertyValues.map(value => this.#renderButton(value, prop.propertyName, value === authoredValue))}\n      </div>\n    </div>`;\n  }\n\n  #renderButton(propertyValue: string, propertyName: string, selected: boolean = false): LitHtml.TemplateResult {\n    const query = `${propertyName}: ${propertyValue}`;\n    const iconInfo = this.findIcon(query, this.#computedProperties);\n    if (!iconInfo) {\n      throw new Error(`Icon for ${query} is not found`);\n    }\n    const transform = `transform: rotate(${iconInfo.rotate}deg) scale(${iconInfo.scaleX}, ${iconInfo.scaleY})`;\n    const classes = Directives.classMap({\n      button: true,\n      selected,\n    });\n    const values = {propertyName, propertyValue};\n    const title = selected ? i18nString(UIStrings.deselectButton, values) : i18nString(UIStrings.selectButton, values);\n    return html`\n      <button title=${title}\n              class=${classes}\n              jslog=${VisualLogging.item().track({click: true}).context(`${propertyName}-${propertyValue}`)}\n              @click=${() => this.#onButtonClick(propertyName, propertyValue, selected)}>\n        <devtools-icon style=${transform} name=${iconInfo.iconName}>\n        </devtools-icon>\n      </button>\n    `;\n  }\n\n  #onButtonClick(propertyName: string, propertyValue: string, selected: boolean): void {\n    if (selected) {\n      this.dispatchEvent(new PropertyDeselectedEvent(propertyName, propertyValue));\n    } else {\n      this.dispatchEvent(new PropertySelectedEvent(propertyName, propertyValue));\n    }\n  }\n\n  protected findIcon(_query: string, _computedProperties: Map<string, string>): IconInfo|null {\n    throw new Error('Not implemented');\n  }\n}\n\nexport class FlexboxEditor extends StylePropertyEditor {\n  readonly jslogContext = 'cssFlexboxEditor';\n  protected override readonly editableProperties: EditableProperty[] = FlexboxEditableProperties;\n\n  protected override findIcon(query: string, computedProperties: Map<string, string>): IconInfo|null {\n    return findFlexContainerIcon(query, computedProperties);\n  }\n}\n\ncustomElements.define('devtools-flexbox-editor', FlexboxEditor);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-flexbox-editor': FlexboxEditor;\n  }\n}\n\nexport class GridEditor extends StylePropertyEditor {\n  readonly jslogContext = 'cssGridEditor';\n  protected override readonly editableProperties: EditableProperty[] = GridEditableProperties;\n\n  protected override findIcon(query: string, computedProperties: Map<string, string>): IconInfo|null {\n    return findGridContainerIcon(query, computedProperties);\n  }\n}\n\ncustomElements.define('devtools-grid-editor', GridEditor);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-grid-editor': GridEditor;\n  }\n}\n\nexport const FlexboxEditableProperties = [\n  {\n    propertyName: 'flex-direction',\n    propertyValues: [\n      'row',\n      'column',\n      'row-reverse',\n      'column-reverse',\n    ],\n  },\n  {\n    propertyName: 'flex-wrap',\n    propertyValues: [\n      'nowrap',\n      'wrap',\n    ],\n  },\n  {\n    propertyName: 'align-content',\n    propertyValues: [\n      'center',\n      'flex-start',\n      'flex-end',\n      'space-around',\n      'space-between',\n      'stretch',\n    ],\n  },\n  {\n    propertyName: 'justify-content',\n    propertyValues: [\n      'center',\n      'flex-start',\n      'flex-end',\n      'space-between',\n      'space-around',\n      'space-evenly',\n    ],\n  },\n  {\n    propertyName: 'align-items',\n    propertyValues: [\n      'center',\n      'flex-start',\n      'flex-end',\n      'stretch',\n      'baseline',\n    ],\n  },\n];\n\nexport const GridEditableProperties = [\n  {\n    propertyName: 'align-content',\n    propertyValues: [\n      'center',\n      'space-between',\n      'space-around',\n      'space-evenly',\n      'stretch',\n    ],\n  },\n  {\n    propertyName: 'justify-content',\n    propertyValues: [\n      'center',\n      'start',\n      'end',\n      'space-between',\n      'space-around',\n      'space-evenly',\n    ],\n  },\n  {\n    propertyName: 'align-items',\n    propertyValues: [\n      'center',\n      'start',\n      'end',\n      'stretch',\n      'baseline',\n    ],\n  },\n  {\n    propertyName: 'justify-items',\n    propertyValues: [\n      'center',\n      'start',\n      'end',\n      'stretch',\n    ],\n  },\n];\n"],
  "mappings": "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",
  "names": []
}
