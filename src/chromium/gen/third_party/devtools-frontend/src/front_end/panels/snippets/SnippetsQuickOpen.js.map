{
  "version": 3,
  "sources": ["../../../../../../../../../third_party/devtools-frontend/src/front_end/panels/snippets/SnippetsQuickOpen.ts"],
  "sourcesContent": ["// Copyright 2017 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as QuickOpen from '../../ui/legacy/components/quick_open/quick_open.js';\nimport type * as Workspace from '../../models/workspace/workspace.js';\n\nimport {evaluateScriptSnippet, findSnippetsProject} from './ScriptSnippetFileSystem.js';\n\nconst UIStrings = {\n  /**\n   *@description Text in Snippets Quick Open of the Sources panel when opening snippets\n   */\n  noSnippetsFound: 'No snippets found.',\n  /**\n   *@description Text for command prefix of run a code snippet\n   */\n  run: 'Run',\n  /**\n   *@description Text for suggestion of run a code snippet\n   */\n  snippet: 'Snippet',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/snippets/SnippetsQuickOpen.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nconst i18nLazyString = i18n.i18n.getLazilyComputedLocalizedString.bind(undefined, str_);\n\nlet snippetsQuickOpenInstance: SnippetsQuickOpen;\n\nexport class SnippetsQuickOpen extends QuickOpen.FilteredListWidget.Provider {\n  private snippets: Workspace.UISourceCode.UISourceCode[];\n  private constructor() {\n    super('snippet');\n    this.snippets = [];\n  }\n\n  static instance(opts: {forceNew: boolean|null} = {forceNew: null}): SnippetsQuickOpen {\n    const {forceNew} = opts;\n    if (!snippetsQuickOpenInstance || forceNew) {\n      snippetsQuickOpenInstance = new SnippetsQuickOpen();\n    }\n\n    return snippetsQuickOpenInstance;\n  }\n\n  override selectItem(itemIndex: number|null, _promptValue: string): void {\n    if (itemIndex === null) {\n      return;\n    }\n    void evaluateScriptSnippet(this.snippets[itemIndex]);\n  }\n\n  override notFoundText(_query: string): string {\n    return i18nString(UIStrings.noSnippetsFound);\n  }\n\n  override attach(): void {\n    this.snippets = [...findSnippetsProject().uiSourceCodes()];\n  }\n\n  override detach(): void {\n    this.snippets = [];\n  }\n\n  override itemScoreAt(itemIndex: number, query: string): number {\n    // Prefer short matches over long matches\n    return query.length / this.snippets[itemIndex].name().length;\n  }\n\n  override itemCount(): number {\n    return this.snippets.length;\n  }\n\n  override itemKeyAt(itemIndex: number): string {\n    return this.snippets[itemIndex].name();\n  }\n\n  override renderItem(itemIndex: number, query: string, titleElement: Element, _subtitleElement: Element): void {\n    titleElement.textContent = this.snippets[itemIndex].name();\n    titleElement.classList.add('monospace');\n    QuickOpen.FilteredListWidget.FilteredListWidget.highlightRanges(titleElement, query, true);\n  }\n}\n\nQuickOpen.FilteredListWidget.registerProvider({\n  prefix: '!',\n  iconName: 'exclamation',\n  iconWidth: '20px',\n  provider: () => Promise.resolve(SnippetsQuickOpen.instance()),\n  titlePrefix: i18nLazyString(UIStrings.run),\n  titleSuggestion: i18nLazyString(UIStrings.snippet),\n});\n"],
  "mappings": ";AAIA,YAAY,UAAU;AACtB,YAAY,eAAe;AAG3B,SAAQ,uBAAuB,2BAA0B;AAEzD,MAAM,YAAY;AAAA;AAAA;AAAA;AAAA,EAIhB,iBAAiB;AAAA;AAAA;AAAA;AAAA,EAIjB,KAAK;AAAA;AAAA;AAAA;AAAA,EAIL,SAAS;AACX;AACA,MAAM,OAAO,KAAK,KAAK,kBAAkB,wCAAwC,SAAS;AAC1F,MAAM,aAAa,KAAK,KAAK,mBAAmB,KAAK,QAAW,IAAI;AACpE,MAAM,iBAAiB,KAAK,KAAK,iCAAiC,KAAK,QAAW,IAAI;AAEtF,IAAI;AAEG,aAAM,0BAA0B,UAAU,mBAAmB,SAAS;AAAA,EACnE;AAAA,EACA,cAAc;AACpB,UAAM,SAAS;AACf,SAAK,WAAW,CAAC;AAAA,EACnB;AAAA,EAEA,OAAO,SAAS,OAAiC,EAAC,UAAU,KAAI,GAAsB;AACpF,UAAM,EAAC,SAAQ,IAAI;AACnB,QAAI,CAAC,6BAA6B,UAAU;AAC1C,kCAA4B,IAAI,kBAAkB;AAAA,IACpD;AAEA,WAAO;AAAA,EACT;AAAA,EAES,WAAW,WAAwB,cAA4B;AACtE,QAAI,cAAc,MAAM;AACtB;AAAA,IACF;AACA,SAAK,sBAAsB,KAAK,SAAS,SAAS,CAAC;AAAA,EACrD;AAAA,EAES,aAAa,QAAwB;AAC5C,WAAO,WAAW,UAAU,eAAe;AAAA,EAC7C;AAAA,EAES,SAAe;AACtB,SAAK,WAAW,CAAC,GAAG,oBAAoB,EAAE,cAAc,CAAC;AAAA,EAC3D;AAAA,EAES,SAAe;AACtB,SAAK,WAAW,CAAC;AAAA,EACnB;AAAA,EAES,YAAY,WAAmB,OAAuB;AAE7D,WAAO,MAAM,SAAS,KAAK,SAAS,SAAS,EAAE,KAAK,EAAE;AAAA,EACxD;AAAA,EAES,YAAoB;AAC3B,WAAO,KAAK,SAAS;AAAA,EACvB;AAAA,EAES,UAAU,WAA2B;AAC5C,WAAO,KAAK,SAAS,SAAS,EAAE,KAAK;AAAA,EACvC;AAAA,EAES,WAAW,WAAmB,OAAe,cAAuB,kBAAiC;AAC5G,iBAAa,cAAc,KAAK,SAAS,SAAS,EAAE,KAAK;AACzD,iBAAa,UAAU,IAAI,WAAW;AACtC,cAAU,mBAAmB,mBAAmB,gBAAgB,cAAc,OAAO,IAAI;AAAA,EAC3F;AACF;AAEA,UAAU,mBAAmB,iBAAiB;AAAA,EAC5C,QAAQ;AAAA,EACR,UAAU;AAAA,EACV,WAAW;AAAA,EACX,UAAU,MAAM,QAAQ,QAAQ,kBAAkB,SAAS,CAAC;AAAA,EAC5D,aAAa,eAAe,UAAU,GAAG;AAAA,EACzC,iBAAiB,eAAe,UAAU,OAAO;AACnD,CAAC;",
  "names": []
}
