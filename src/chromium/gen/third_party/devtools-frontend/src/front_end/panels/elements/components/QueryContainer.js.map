{
  "version": 3,
  "sources": ["../../../../../../../../../../third_party/devtools-frontend/src/front_end/panels/elements/components/QueryContainer.ts"],
  "sourcesContent": ["// Copyright (c) 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../ui/components/icon_button/icon_button.js';\nimport '../../../ui/components/node_text/node_text.js';\n\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport type {DOMNode} from './Helper.js';\nimport queryContainerStyles from './queryContainer.css.js';\n\nconst {render, html} = LitHtml;\nconst {PhysicalAxis, QueryAxis} = SDK.CSSContainerQuery;\n\nexport class QueriedSizeRequestedEvent extends Event {\n  static readonly eventName = 'queriedsizerequested';\n  constructor() {\n    super(QueriedSizeRequestedEvent.eventName, {});\n  }\n}\n\nexport interface QueryContainerData {\n  container: DOMNode;\n  queryName?: string;\n  onContainerLinkClick: (event: Event) => void;\n}\n\nexport class QueryContainer extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #queryName?: string;\n  #container?: DOMNode;\n  #onContainerLinkClick?: (event: Event) => void;\n  #isContainerLinkHovered = false;\n  #queriedSizeDetails?: SDK.CSSContainerQuery.ContainerQueriedSizeDetails;\n\n  set data(data: QueryContainerData) {\n    this.#queryName = data.queryName;\n    this.#container = data.container;\n    this.#onContainerLinkClick = data.onContainerLinkClick;\n    this.#render();\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [queryContainerStyles];\n  }\n\n  updateContainerQueriedSizeDetails(details: SDK.CSSContainerQuery.ContainerQueriedSizeDetails): void {\n    this.#queriedSizeDetails = details;\n    this.#render();\n  }\n\n  async #onContainerLinkMouseEnter(): Promise<void> {\n    this.#container?.highlightNode('container-outline');\n    this.#isContainerLinkHovered = true;\n    this.dispatchEvent(new QueriedSizeRequestedEvent());\n  }\n\n  #onContainerLinkMouseLeave(): void {\n    this.#container?.clearHighlight();\n    this.#isContainerLinkHovered = false;\n    this.#render();\n  }\n\n  #render(): void {\n    if (!this.#container) {\n      return;\n    }\n\n    let idToDisplay, classesToDisplay;\n    if (!this.#queryName) {\n      idToDisplay = this.#container.getAttribute('id');\n      classesToDisplay = this.#container.getAttribute('class')?.split(/\\s+/).filter(Boolean);\n    }\n\n    const nodeTitle = this.#queryName || this.#container.nodeNameNicelyCased;\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    // eslint-disable-next-line rulesdir/ban_a_tags_in_lit_html\n    render(html`\n      \u2192\n      <a href=\"#\"\n        draggable=false\n        class=\"container-link\"\n        jslog=${VisualLogging.cssRuleHeader('container-query').track({click: true})}\n        @click=${this.#onContainerLinkClick}\n        @mouseenter=${this.#onContainerLinkMouseEnter}\n        @mouseleave=${this.#onContainerLinkMouseLeave}\n      ><devtools-node-text\n          data-node-title=${nodeTitle}\n          .data=${{\n        nodeTitle,\n        nodeId: idToDisplay,\n        nodeClasses: classesToDisplay,\n      }}></devtools-node-text></a>\n      ${this.#isContainerLinkHovered ? this.#renderQueriedSizeDetails() : LitHtml.nothing}\n    `, this.#shadow, {\n      host: this,\n    });\n    // clang-format on\n  }\n\n  #renderQueriedSizeDetails(): LitHtml.LitTemplate {\n    if (!this.#queriedSizeDetails || this.#queriedSizeDetails.queryAxis === QueryAxis.NONE) {\n      return LitHtml.nothing;\n    }\n\n    const areBothAxesQueried = this.#queriedSizeDetails.queryAxis === QueryAxis.BOTH;\n\n    const axisIconClasses = LitHtml.Directives.classMap({\n      'axis-icon': true,\n      hidden: areBothAxesQueried,\n      vertical: this.#queriedSizeDetails.physicalAxis === PhysicalAxis.VERTICAL,\n    });\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    return html`\n      <span class=\"queried-size-details\">\n        (${this.#queriedSizeDetails.queryAxis}<devtools-icon\n          class=${axisIconClasses} .data=${{\n            iconName: 'width',\n            color: 'var(--icon-default)',\n          }}></devtools-icon>)\n        ${areBothAxesQueried && this.#queriedSizeDetails.width ? 'width:' : LitHtml.nothing}\n        ${this.#queriedSizeDetails.width || LitHtml.nothing}\n        ${areBothAxesQueried && this.#queriedSizeDetails.height ? 'height:' : LitHtml.nothing}\n        ${this.#queriedSizeDetails.height || LitHtml.nothing}\n      </span>\n    `;\n            // clang-format on\n  }\n}\n\ncustomElements.define('devtools-query-container', QueryContainer);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-query-container': QueryContainer;\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
