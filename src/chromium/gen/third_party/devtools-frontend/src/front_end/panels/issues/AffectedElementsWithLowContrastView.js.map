{
  "version": 3,
  "sources": ["../../../../../../../../../third_party/devtools-frontend/src/front_end/panels/issues/AffectedElementsWithLowContrastView.ts"],
  "sourcesContent": ["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport type * as IssuesManager from '../../models/issues_manager/issues_manager.js';\n\nimport {AffectedElementsView} from './AffectedElementsView.js';\n\nexport class AffectedElementsWithLowContrastView extends AffectedElementsView {\n  #runningUpdatePromise: Promise<void> = Promise.resolve();\n\n  override update(): void {\n    // Ensure that doUpdate is invoked atomically by serializing the update calls\n    // because it's not re-entrace safe.\n    this.#runningUpdatePromise = this.#runningUpdatePromise.then(this.#doUpdate.bind(this));\n  }\n\n  async #doUpdate(): Promise<void> {\n    this.clear();\n    await this.#appendLowContrastElements(this.issue.getLowContrastIssues());\n  }\n\n  async #appendLowContrastElement(issue: IssuesManager.LowTextContrastIssue.LowTextContrastIssue): Promise<void> {\n    const row = document.createElement('tr');\n    row.classList.add('affected-resource-low-contrast');\n\n    const details = issue.details();\n    const target = issue.model()?.target() || null;\n    row.appendChild(await this.createElementCell(\n        {nodeName: details.violatingNodeSelector, backendNodeId: details.violatingNodeId, target},\n        issue.getCategory()));\n    this.appendIssueDetailCell(row, String(Platform.NumberUtilities.floor(details.contrastRatio, 2)));\n    this.appendIssueDetailCell(row, String(details.thresholdAA));\n    this.appendIssueDetailCell(row, String(details.thresholdAAA));\n    this.appendIssueDetailCell(row, details.fontSize);\n    this.appendIssueDetailCell(row, details.fontWeight);\n\n    this.affectedResources.appendChild(row);\n  }\n\n  async #appendLowContrastElements(issues: Iterable<IssuesManager.LowTextContrastIssue.LowTextContrastIssue>):\n      Promise<void> {\n    const header = document.createElement('tr');\n    this.appendColumnTitle(header, i18nString(UIStrings.element));\n    this.appendColumnTitle(header, i18nString(UIStrings.contrastRatio));\n    this.appendColumnTitle(header, i18nString(UIStrings.minimumAA));\n    this.appendColumnTitle(header, i18nString(UIStrings.minimumAAA));\n    this.appendColumnTitle(header, i18nString(UIStrings.textSize));\n    this.appendColumnTitle(header, i18nString(UIStrings.textWeight));\n\n    this.affectedResources.appendChild(header);\n    let count = 0;\n    for (const lowContrastIssue of issues) {\n      count++;\n      await this.#appendLowContrastElement(lowContrastIssue);\n    }\n    this.updateAffectedResourceCount(count);\n  }\n}\n\nconst UIStrings = {\n  /**\n   *@description Column title for the element column in the low contrast issue view\n   */\n  element: 'Element',\n  /**\n   *@description Column title for the contrast ratio column in the low contrast issue view\n   */\n  contrastRatio: 'Contrast ratio',\n  /**\n   *@description Column title for the minimum AA contrast ratio column in the low contrast issue view\n   */\n  minimumAA: 'Minimum AA ratio',\n  /**\n   *@description Column title for the minimum AAA contrast ratio column in the low contrast issue view\n   */\n  minimumAAA: 'Minimum AAA ratio',\n  /**\n   *@description Column title for the text size column in the low contrast issue view\n   */\n  textSize: 'Text size',\n  /**\n   *@description Column title for the text weight column in the low contrast issue view\n   */\n  textWeight: 'Text weight',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedElementsWithLowContrastView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n"],
  "mappings": ";AAIA,YAAY,UAAU;AACtB,YAAY,cAAc;AAG1B,SAAQ,4BAA2B;AAE5B,aAAM,4CAA4C,qBAAqB;AAAA,EAC5E,wBAAuC,QAAQ,QAAQ;AAAA,EAE9C,SAAe;AAGtB,SAAK,wBAAwB,KAAK,sBAAsB,KAAK,KAAK,UAAU,KAAK,IAAI,CAAC;AAAA,EACxF;AAAA,EAEA,MAAM,YAA2B;AAC/B,SAAK,MAAM;AACX,UAAM,KAAK,2BAA2B,KAAK,MAAM,qBAAqB,CAAC;AAAA,EACzE;AAAA,EAEA,MAAM,0BAA0B,OAA+E;AAC7G,UAAM,MAAM,SAAS,cAAc,IAAI;AACvC,QAAI,UAAU,IAAI,gCAAgC;AAElD,UAAM,UAAU,MAAM,QAAQ;AAC9B,UAAM,SAAS,MAAM,MAAM,GAAG,OAAO,KAAK;AAC1C,QAAI,YAAY,MAAM,KAAK;AAAA,MACvB,EAAC,UAAU,QAAQ,uBAAuB,eAAe,QAAQ,iBAAiB,OAAM;AAAA,MACxF,MAAM,YAAY;AAAA,IAAC,CAAC;AACxB,SAAK,sBAAsB,KAAK,OAAO,SAAS,gBAAgB,MAAM,QAAQ,eAAe,CAAC,CAAC,CAAC;AAChG,SAAK,sBAAsB,KAAK,OAAO,QAAQ,WAAW,CAAC;AAC3D,SAAK,sBAAsB,KAAK,OAAO,QAAQ,YAAY,CAAC;AAC5D,SAAK,sBAAsB,KAAK,QAAQ,QAAQ;AAChD,SAAK,sBAAsB,KAAK,QAAQ,UAAU;AAElD,SAAK,kBAAkB,YAAY,GAAG;AAAA,EACxC;AAAA,EAEA,MAAM,2BAA2B,QACf;AAChB,UAAM,SAAS,SAAS,cAAc,IAAI;AAC1C,SAAK,kBAAkB,QAAQ,WAAW,UAAU,OAAO,CAAC;AAC5D,SAAK,kBAAkB,QAAQ,WAAW,UAAU,aAAa,CAAC;AAClE,SAAK,kBAAkB,QAAQ,WAAW,UAAU,SAAS,CAAC;AAC9D,SAAK,kBAAkB,QAAQ,WAAW,UAAU,UAAU,CAAC;AAC/D,SAAK,kBAAkB,QAAQ,WAAW,UAAU,QAAQ,CAAC;AAC7D,SAAK,kBAAkB,QAAQ,WAAW,UAAU,UAAU,CAAC;AAE/D,SAAK,kBAAkB,YAAY,MAAM;AACzC,QAAI,QAAQ;AACZ,eAAW,oBAAoB,QAAQ;AACrC;AACA,YAAM,KAAK,0BAA0B,gBAAgB;AAAA,IACvD;AACA,SAAK,4BAA4B,KAAK;AAAA,EACxC;AACF;AAEA,MAAM,YAAY;AAAA;AAAA;AAAA;AAAA,EAIhB,SAAS;AAAA;AAAA;AAAA;AAAA,EAIT,eAAe;AAAA;AAAA;AAAA;AAAA,EAIf,WAAW;AAAA;AAAA;AAAA;AAAA,EAIX,YAAY;AAAA;AAAA;AAAA;AAAA,EAIZ,UAAU;AAAA;AAAA;AAAA;AAAA,EAIV,YAAY;AACd;AACA,MAAM,OAAO,KAAK,KAAK,kBAAkB,wDAAwD,SAAS;AAC1G,MAAM,aAAa,KAAK,KAAK,mBAAmB,KAAK,QAAW,IAAI;",
  "names": []
}
