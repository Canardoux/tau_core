{
  "version": 3,
  "sources": ["../../../../../../../../../third_party/devtools-frontend/src/front_end/panels/issues/AffectedSourcesView.ts"],
  "sourcesContent": ["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as VisualLogging from '../../ui/visual_logging/visual_logging.js';\n\nimport {AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n   *@description Singular or Plural label for number of affected sources (consisting of (source) file name + line number) in issue view\n   */\n  nSources: '{n, plural, =1 {# source} other {# sources}}',\n};\n\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedSourcesView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class AffectedSourcesView extends AffectedResourcesView {\n  #appendAffectedSources(affectedSources: Iterable<Protocol.Audits.SourceCodeLocation>): void {\n    let count = 0;\n    for (const source of affectedSources) {\n      this.#appendAffectedSource(source);\n      count++;\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nSources, {n: count});\n  }\n\n  #appendAffectedSource({url, lineNumber, columnNumber}: Protocol.Audits.SourceCodeLocation): void {\n    const cellElement = document.createElement('td');\n    // TODO(chromium:1072331): Check feasibility of plumping through scriptId for `linkifyScriptLocation`\n    //                         to support source maps and formatted scripts.\n    const linkifierURLOptions = {columnNumber, lineNumber, tabStop: true, showColumnNumber: false, inlineFrameIndex: 0};\n    // An element created with linkifyURL can subscribe to the events\n    // 'click' neither 'keydown' if that key is the 'Enter' key.\n    // Also, this element has a context menu, so we should be able to\n    // track when the user use the context menu too.\n    // TODO(crbug.com/1108503): Add some mechanism to be able to add telemetry to this element.\n    const anchorElement =\n        Components.Linkifier.Linkifier.linkifyURL(url as Platform.DevToolsPath.UrlString, linkifierURLOptions);\n    anchorElement.setAttribute('jslog', `${VisualLogging.link('source-location').track({click: true})}`);\n    cellElement.appendChild(anchorElement);\n    const rowElement = document.createElement('tr');\n    rowElement.classList.add('affected-resource-source');\n    rowElement.appendChild(cellElement);\n    this.affectedResources.appendChild(rowElement);\n  }\n\n  update(): void {\n    this.clear();\n    this.#appendAffectedSources(this.issue.sources());\n  }\n}\n"],
  "mappings": ";AAIA,YAAY,UAAU;AAGtB,YAAY,gBAAgB;AAC5B,YAAY,mBAAmB;AAE/B,SAAQ,6BAA4B;AAEpC,MAAM,YAAY;AAAA;AAAA;AAAA;AAAA,EAIhB,UAAU;AACZ;AAEA,MAAM,OAAO,KAAK,KAAK,kBAAkB,wCAAwC,SAAS;AAC1F,MAAM,aAAa,KAAK,KAAK,mBAAmB,KAAK,QAAW,IAAI;AAE7D,aAAM,4BAA4B,sBAAsB;AAAA,EAC7D,uBAAuB,iBAAqE;AAC1F,QAAI,QAAQ;AACZ,eAAW,UAAU,iBAAiB;AACpC,WAAK,sBAAsB,MAAM;AACjC;AAAA,IACF;AACA,SAAK,4BAA4B,KAAK;AAAA,EACxC;AAAA,EAEU,yBAAyB,OAAkD;AACnF,WAAO,WAAW,UAAU,UAAU,EAAC,GAAG,MAAK,CAAC;AAAA,EAClD;AAAA,EAEA,sBAAsB,EAAC,KAAK,YAAY,aAAY,GAA6C;AAC/F,UAAM,cAAc,SAAS,cAAc,IAAI;AAG/C,UAAM,sBAAsB,EAAC,cAAc,YAAY,SAAS,MAAM,kBAAkB,OAAO,kBAAkB,EAAC;AAMlH,UAAM,gBACF,WAAW,UAAU,UAAU,WAAW,KAAwC,mBAAmB;AACzG,kBAAc,aAAa,SAAS,GAAG,cAAc,KAAK,iBAAiB,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,CAAC,EAAE;AACnG,gBAAY,YAAY,aAAa;AACrC,UAAM,aAAa,SAAS,cAAc,IAAI;AAC9C,eAAW,UAAU,IAAI,0BAA0B;AACnD,eAAW,YAAY,WAAW;AAClC,SAAK,kBAAkB,YAAY,UAAU;AAAA,EAC/C;AAAA,EAEA,SAAe;AACb,SAAK,MAAM;AACX,SAAK,uBAAuB,KAAK,MAAM,QAAQ,CAAC;AAAA,EAClD;AACF;",
  "names": []
}
