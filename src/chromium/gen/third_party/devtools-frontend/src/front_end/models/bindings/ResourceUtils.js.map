{
  "version": 3,
  "sources": ["../../../../../../../../../third_party/devtools-frontend/src/front_end/models/bindings/ResourceUtils.ts"],
  "sourcesContent": ["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2007 Matt Lilek (pewtermoose@gmail.com).\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Common from '../../core/common/common.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Workspace from '../workspace/workspace.js';\n\nexport function resourceForURL(url: Platform.DevToolsPath.UrlString): SDK.Resource.Resource|null {\n  for (const resourceTreeModel of SDK.TargetManager.TargetManager.instance().models(\n           SDK.ResourceTreeModel.ResourceTreeModel)) {\n    const resource = resourceTreeModel.resourceForURL(url);\n    if (resource) {\n      return resource;\n    }\n  }\n  return null;\n}\n\nexport function displayNameForURL(url: Platform.DevToolsPath.UrlString): string {\n  if (!url) {\n    return '';\n  }\n\n  const resource = resourceForURL(url);\n  if (resource) {\n    return resource.displayName;\n  }\n\n  const uiSourceCode = Workspace.Workspace.WorkspaceImpl.instance().uiSourceCodeForURL(url);\n  if (uiSourceCode) {\n    return uiSourceCode.displayName();\n  }\n\n  const inspectedURL = SDK.TargetManager.TargetManager.instance().inspectedURL();\n  if (!inspectedURL) {\n    return Platform.StringUtilities.trimURL(url, '');\n  }\n\n  const parsedURL = Common.ParsedURL.ParsedURL.fromString(inspectedURL);\n  if (!parsedURL) {\n    return url;\n  }\n\n  const lastPathComponent = parsedURL.lastPathComponent;\n  const index = inspectedURL.indexOf(lastPathComponent);\n  if (index !== -1 && index + lastPathComponent.length === inspectedURL.length) {\n    const baseURL = inspectedURL.substring(0, index);\n    if (url.startsWith(baseURL) && url.length > index) {\n      return url.substring(index);\n    }\n  }\n\n  const displayName = Platform.StringUtilities.trimURL(url, parsedURL.host);\n  return displayName === '/' ? parsedURL.host + '/' : displayName;\n}\n\nexport function metadataForURL(\n    target: SDK.Target.Target, frameId: Protocol.Page.FrameId,\n    url: Platform.DevToolsPath.UrlString): Workspace.UISourceCode.UISourceCodeMetadata|null {\n  const resourceTreeModel = target.model(SDK.ResourceTreeModel.ResourceTreeModel);\n  if (!resourceTreeModel) {\n    return null;\n  }\n  const frame = resourceTreeModel.frameForId(frameId);\n  if (!frame) {\n    return null;\n  }\n  return resourceMetadata(frame.resourceForURL(url));\n}\n\nexport function resourceMetadata(resource: SDK.Resource.Resource|null): Workspace.UISourceCode.UISourceCodeMetadata|\n    null {\n  if (!resource || (typeof resource.contentSize() !== 'number' && !resource.lastModified())) {\n    return null;\n  }\n  return new Workspace.UISourceCode.UISourceCodeMetadata(resource.lastModified(), resource.contentSize());\n}\n"],
  "mappings": ";AAkCA,YAAY,YAAY;AACxB,YAAY,cAAc;AAC1B,YAAY,SAAS;AAErB,YAAY,eAAe;AAEpB,gBAAS,eAAe,KAAkE;AAC/F,aAAW,qBAAqB,IAAI,cAAc,cAAc,SAAS,EAAE;AAAA,IAClE,IAAI,kBAAkB;AAAA,EAAiB,GAAG;AACjD,UAAM,WAAW,kBAAkB,eAAe,GAAG;AACrD,QAAI,UAAU;AACZ,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEO,gBAAS,kBAAkB,KAA8C;AAC9E,MAAI,CAAC,KAAK;AACR,WAAO;AAAA,EACT;AAEA,QAAM,WAAW,eAAe,GAAG;AACnC,MAAI,UAAU;AACZ,WAAO,SAAS;AAAA,EAClB;AAEA,QAAM,eAAe,UAAU,UAAU,cAAc,SAAS,EAAE,mBAAmB,GAAG;AACxF,MAAI,cAAc;AAChB,WAAO,aAAa,YAAY;AAAA,EAClC;AAEA,QAAM,eAAe,IAAI,cAAc,cAAc,SAAS,EAAE,aAAa;AAC7E,MAAI,CAAC,cAAc;AACjB,WAAO,SAAS,gBAAgB,QAAQ,KAAK,EAAE;AAAA,EACjD;AAEA,QAAM,YAAY,OAAO,UAAU,UAAU,WAAW,YAAY;AACpE,MAAI,CAAC,WAAW;AACd,WAAO;AAAA,EACT;AAEA,QAAM,oBAAoB,UAAU;AACpC,QAAM,QAAQ,aAAa,QAAQ,iBAAiB;AACpD,MAAI,UAAU,MAAM,QAAQ,kBAAkB,WAAW,aAAa,QAAQ;AAC5E,UAAM,UAAU,aAAa,UAAU,GAAG,KAAK;AAC/C,QAAI,IAAI,WAAW,OAAO,KAAK,IAAI,SAAS,OAAO;AACjD,aAAO,IAAI,UAAU,KAAK;AAAA,IAC5B;AAAA,EACF;AAEA,QAAM,cAAc,SAAS,gBAAgB,QAAQ,KAAK,UAAU,IAAI;AACxE,SAAO,gBAAgB,MAAM,UAAU,OAAO,MAAM;AACtD;AAEO,gBAAS,eACZ,QAA2B,SAC3B,KAAwF;AAC1F,QAAM,oBAAoB,OAAO,MAAM,IAAI,kBAAkB,iBAAiB;AAC9E,MAAI,CAAC,mBAAmB;AACtB,WAAO;AAAA,EACT;AACA,QAAM,QAAQ,kBAAkB,WAAW,OAAO;AAClD,MAAI,CAAC,OAAO;AACV,WAAO;AAAA,EACT;AACA,SAAO,iBAAiB,MAAM,eAAe,GAAG,CAAC;AACnD;AAEO,gBAAS,iBAAiB,UACxB;AACP,MAAI,CAAC,YAAa,OAAO,SAAS,YAAY,MAAM,YAAY,CAAC,SAAS,aAAa,GAAI;AACzF,WAAO;AAAA,EACT;AACA,SAAO,IAAI,UAAU,aAAa,qBAAqB,SAAS,aAAa,GAAG,SAAS,YAAY,CAAC;AACxG;",
  "names": []
}
