{
  "version": 3,
  "sources": ["../../../../../../../../../third_party/devtools-frontend/src/front_end/models/persistence/PersistenceUtils.ts"],
  "sourcesContent": ["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as IconButton from '../../ui/components/icon_button/icon_button.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Workspace from '../workspace/workspace.js';\n\nimport {FileSystemWorkspaceBinding} from './FileSystemWorkspaceBinding.js';\nimport {NetworkPersistenceManager} from './NetworkPersistenceManager.js';\nimport {Events, type PersistenceBinding, PersistenceImpl} from './PersistenceImpl.js';\n\nconst UIStrings = {\n  /**\n   *@description Text in Persistence Utils of the Workspace settings in Settings\n   *@example {example.url} PH1\n   */\n  linkedToSourceMapS: 'Linked to source map: {PH1}',\n  /**\n   *@description Text to show something is linked to another\n   *@example {example.url} PH1\n   */\n  linkedToS: 'Linked to {PH1}',\n};\nconst str_ = i18n.i18n.registerUIStrings('models/persistence/PersistenceUtils.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class PersistenceUtils {\n  static tooltipForUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): string {\n    const binding = PersistenceImpl.instance().binding(uiSourceCode);\n    if (!binding) {\n      return '';\n    }\n    if (uiSourceCode === binding.network) {\n      return FileSystemWorkspaceBinding.tooltipForUISourceCode(binding.fileSystem);\n    }\n    if (binding.network.contentType().isFromSourceMap()) {\n      return i18nString(\n          UIStrings.linkedToSourceMapS, {PH1: Platform.StringUtilities.trimMiddle(binding.network.url(), 150)});\n    }\n    return i18nString(UIStrings.linkedToS, {PH1: Platform.StringUtilities.trimMiddle(binding.network.url(), 150)});\n  }\n\n  static iconForUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): IconButton.Icon.Icon|null {\n    const binding = PersistenceImpl.instance().binding(uiSourceCode);\n    if (binding) {\n      if (!Common.ParsedURL.schemeIs(binding.fileSystem.url(), 'file:')) {\n        return null;\n      }\n      const icon = new IconButton.Icon.Icon();\n      icon.data = {iconName: 'document', color: 'var(--icon-default)', width: '16px', height: '16px'};\n      UI.Tooltip.Tooltip.install(icon, PersistenceUtils.tooltipForUISourceCode(binding.network));\n      if (NetworkPersistenceManager.instance().project() === binding.fileSystem.project()) {\n        icon.classList.add('dot', 'purple');\n      } else {\n        icon.classList.add('dot', 'green');\n      }\n      return icon;\n    }\n\n    if (uiSourceCode.project().type() !== Workspace.Workspace.projectTypes.FileSystem ||\n        !Common.ParsedURL.schemeIs(uiSourceCode.url(), 'file:')) {\n      return null;\n    }\n\n    if (NetworkPersistenceManager.instance().isActiveHeaderOverrides(uiSourceCode)) {\n      const icon = new IconButton.Icon.Icon();\n      icon.data = {iconName: 'document', color: 'var(--icon-default)', width: '16px', height: '16px'};\n      icon.classList.add('dot', 'purple');\n      return icon;\n    }\n\n    const icon = new IconButton.Icon.Icon();\n    icon.data = {iconName: 'document', color: 'var(--icon-default)', width: '16px', height: '16px'};\n    UI.Tooltip.Tooltip.install(icon, PersistenceUtils.tooltipForUISourceCode(uiSourceCode));\n    return icon;\n  }\n}\n\nexport class LinkDecorator extends Common.ObjectWrapper.ObjectWrapper<Components.Linkifier.LinkDecorator.EventTypes>\n    implements Components.Linkifier.LinkDecorator {\n  constructor(persistence: PersistenceImpl) {\n    super();\n    persistence.addEventListener(Events.BindingCreated, this.bindingChanged, this);\n    persistence.addEventListener(Events.BindingRemoved, this.bindingChanged, this);\n  }\n\n  private bindingChanged(event: Common.EventTarget.EventTargetEvent<PersistenceBinding>): void {\n    const binding = event.data;\n    this.dispatchEventToListeners(Components.Linkifier.LinkDecorator.Events.LINK_ICON_CHANGED, binding.network);\n  }\n\n  linkIcon(uiSourceCode: Workspace.UISourceCode.UISourceCode): IconButton.Icon.Icon|null {\n    return PersistenceUtils.iconForUISourceCode(uiSourceCode);\n  }\n}\n"],
  "mappings": "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",
  "names": ["icon"]
}
