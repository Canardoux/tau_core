{
  "version": 3,
  "sources": ["../../../../../../../../../third_party/devtools-frontend/src/front_end/core/sdk/RuntimeModel.ts"],
  "sourcesContent": ["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2012 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the #name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport type * as ProtocolProxyApi from '../../generated/protocol-proxy-api.js';\nimport type * as Protocol from '../../generated/protocol.js';\nimport * as Common from '../common/common.js';\nimport * as Host from '../host/host.js';\nimport type * as Platform from '../platform/platform.js';\n\nimport {DebuggerModel, type FunctionDetails} from './DebuggerModel.js';\nimport {HeapProfilerModel} from './HeapProfilerModel.js';\nimport {\n  RemoteFunction,\n  RemoteObject,\n  RemoteObjectImpl,\n  RemoteObjectProperty,\n  type ScopeRef,\n  ScopeRemoteObject,\n} from './RemoteObject.js';\nimport {SDKModel} from './SDKModel.js';\nimport {Capability, type Target, Type} from './Target.js';\n\nexport class RuntimeModel extends SDKModel<EventTypes> {\n  readonly agent: ProtocolProxyApi.RuntimeApi;\n  readonly #executionContextById: Map<number, ExecutionContext>;\n  #executionContextComparatorInternal: (arg0: ExecutionContext, arg1: ExecutionContext) => number;\n  constructor(target: Target) {\n    super(target);\n\n    this.agent = target.runtimeAgent();\n    this.target().registerRuntimeDispatcher(new RuntimeDispatcher(this));\n    void this.agent.invoke_enable();\n    this.#executionContextById = new Map();\n    this.#executionContextComparatorInternal = ExecutionContext.comparator;\n\n    if (Common.Settings.Settings.instance().moduleSetting('custom-formatters').get()) {\n      void this.agent.invoke_setCustomObjectFormatterEnabled({enabled: true});\n    }\n\n    Common.Settings.Settings.instance()\n        .moduleSetting('custom-formatters')\n        .addChangeListener(this.customFormattersStateChanged.bind(this));\n  }\n\n  static isSideEffectFailure(response: Protocol.Runtime.EvaluateResponse|EvaluationResult): boolean {\n    const exceptionDetails = 'exceptionDetails' in response && response.exceptionDetails;\n    return Boolean(\n        exceptionDetails && exceptionDetails.exception && exceptionDetails.exception.description &&\n        exceptionDetails.exception.description.startsWith('EvalError: Possible side-effect in debug-evaluate'));\n  }\n\n  debuggerModel(): DebuggerModel {\n    return this.target().model(DebuggerModel) as DebuggerModel;\n  }\n\n  heapProfilerModel(): HeapProfilerModel {\n    return this.target().model(HeapProfilerModel) as HeapProfilerModel;\n  }\n\n  executionContexts(): ExecutionContext[] {\n    return [...this.#executionContextById.values()].sort(this.executionContextComparator());\n  }\n\n  setExecutionContextComparator(comparator: (arg0: ExecutionContext, arg1: ExecutionContext) => number): void {\n    this.#executionContextComparatorInternal = comparator;\n  }\n\n  /** comparator\n   */\n  executionContextComparator(): (arg0: ExecutionContext, arg1: ExecutionContext) => number {\n    return this.#executionContextComparatorInternal;\n  }\n\n  defaultExecutionContext(): ExecutionContext|null {\n    for (const context of this.executionContexts()) {\n      if (context.isDefault) {\n        return context;\n      }\n    }\n    return null;\n  }\n\n  executionContext(id: number): ExecutionContext|null {\n    return this.#executionContextById.get(id) || null;\n  }\n\n  executionContextCreated(context: Protocol.Runtime.ExecutionContextDescription): void {\n    const data = context.auxData || {isDefault: true};\n    const executionContext = new ExecutionContext(\n        this, context.id, context.uniqueId, context.name, context.origin as Platform.DevToolsPath.UrlString,\n        data['isDefault'], data['frameId']);\n    this.#executionContextById.set(executionContext.id, executionContext);\n    this.dispatchEventToListeners(Events.ExecutionContextCreated, executionContext);\n  }\n\n  executionContextDestroyed(executionContextId: number): void {\n    const executionContext = this.#executionContextById.get(executionContextId);\n    if (!executionContext) {\n      return;\n    }\n    this.debuggerModel().executionContextDestroyed(executionContext);\n    this.#executionContextById.delete(executionContextId);\n    this.dispatchEventToListeners(Events.ExecutionContextDestroyed, executionContext);\n  }\n\n  fireExecutionContextOrderChanged(): void {\n    this.dispatchEventToListeners(Events.ExecutionContextOrderChanged, this);\n  }\n\n  executionContextsCleared(): void {\n    this.debuggerModel().globalObjectCleared();\n    const contexts = this.executionContexts();\n    this.#executionContextById.clear();\n    for (let i = 0; i < contexts.length; ++i) {\n      this.dispatchEventToListeners(Events.ExecutionContextDestroyed, contexts[i]);\n    }\n  }\n\n  createRemoteObject(payload: Protocol.Runtime.RemoteObject): RemoteObject {\n    console.assert(typeof payload === 'object', 'Remote object payload should only be an object');\n    return new RemoteObjectImpl(\n        this, payload.objectId, payload.type, payload.subtype, payload.value, payload.unserializableValue,\n        payload.description, payload.preview, payload.customPreview, payload.className);\n  }\n\n  createScopeRemoteObject(payload: Protocol.Runtime.RemoteObject, scopeRef: ScopeRef): RemoteObject {\n    return new ScopeRemoteObject(\n        this, payload.objectId, scopeRef, payload.type, payload.subtype, payload.value, payload.unserializableValue,\n        payload.description, payload.preview);\n  }\n\n  createRemoteObjectFromPrimitiveValue(value: string|number|bigint|boolean|undefined): RemoteObject {\n    const type = typeof value;\n    let unserializableValue: string|undefined = undefined;\n    const unserializableDescription = RemoteObject.unserializableDescription(value);\n    if (unserializableDescription !== null) {\n      unserializableValue = (unserializableDescription as string);\n    }\n    if (typeof unserializableValue !== 'undefined') {\n      value = undefined;\n    }\n    return new RemoteObjectImpl(this, undefined, type, undefined, value, unserializableValue);\n  }\n\n  createRemotePropertyFromPrimitiveValue(name: string, value: string|number|boolean): RemoteObjectProperty {\n    return new RemoteObjectProperty(name, this.createRemoteObjectFromPrimitiveValue(value));\n  }\n\n  discardConsoleEntries(): void {\n    void this.agent.invoke_discardConsoleEntries();\n  }\n\n  releaseObjectGroup(objectGroup: string): void {\n    void this.agent.invoke_releaseObjectGroup({objectGroup});\n  }\n\n  releaseEvaluationResult(result: EvaluationResult): void {\n    if ('object' in result && result.object) {\n      result.object.release();\n    }\n    if ('exceptionDetails' in result && result.exceptionDetails && result.exceptionDetails.exception) {\n      const exception = result.exceptionDetails.exception;\n      const exceptionObject = this.createRemoteObject({type: exception.type, objectId: exception.objectId});\n      exceptionObject.release();\n    }\n  }\n\n  runIfWaitingForDebugger(): void {\n    void this.agent.invoke_runIfWaitingForDebugger();\n  }\n\n  private customFormattersStateChanged({data: enabled}: Common.EventTarget.EventTargetEvent<boolean>): void {\n    void this.agent.invoke_setCustomObjectFormatterEnabled({enabled});\n  }\n\n  async compileScript(\n      expression: string, sourceURL: string, persistScript: boolean,\n      executionContextId: Protocol.Runtime.ExecutionContextId): Promise<CompileScriptResult|null> {\n    const response = await this.agent.invoke_compileScript({\n      expression,\n      sourceURL,\n      persistScript,\n      executionContextId,\n    });\n\n    if (response.getError()) {\n      console.error(response.getError());\n      return null;\n    }\n    return {scriptId: response.scriptId, exceptionDetails: response.exceptionDetails};\n  }\n\n  async runScript(\n      scriptId: Protocol.Runtime.ScriptId, executionContextId: Protocol.Runtime.ExecutionContextId,\n      objectGroup?: string, silent?: boolean, includeCommandLineAPI?: boolean, returnByValue?: boolean,\n      generatePreview?: boolean, awaitPromise?: boolean): Promise<EvaluationResult> {\n    const response = await this.agent.invoke_runScript({\n      scriptId,\n      executionContextId,\n      objectGroup,\n      silent,\n      includeCommandLineAPI,\n      returnByValue,\n      generatePreview,\n      awaitPromise,\n    });\n\n    const error = response.getError();\n    if (error) {\n      console.error(error);\n      return {error};\n    }\n    return {object: this.createRemoteObject(response.result), exceptionDetails: response.exceptionDetails};\n  }\n\n  async queryObjects(prototype: RemoteObject): Promise<QueryObjectResult> {\n    if (!prototype.objectId) {\n      return {error: 'Prototype should be an Object.'};\n    }\n    const response =\n        await this.agent.invoke_queryObjects({prototypeObjectId: prototype.objectId, objectGroup: 'console'});\n    const error = response.getError();\n    if (error) {\n      console.error(error);\n      return {error};\n    }\n    return {objects: this.createRemoteObject(response.objects)};\n  }\n\n  async isolateId(): Promise<string> {\n    const response = await this.agent.invoke_getIsolateId();\n    if (response.getError() || !response.id) {\n      return this.target().id();\n    }\n    return response.id;\n  }\n\n  async heapUsage(): Promise<{\n    usedSize: number,\n    totalSize: number,\n  }|null> {\n    const result = await this.agent.invoke_getHeapUsage();\n    return result.getError() ? null : result;\n  }\n\n  inspectRequested(payload: Protocol.Runtime.RemoteObject, hints: unknown, executionContextId?: number): void {\n    const object = this.createRemoteObject(payload);\n\n    if (hints !== null && typeof hints === 'object') {\n      if ('copyToClipboard' in hints && Boolean(hints.copyToClipboard)) {\n        this.copyRequested(object);\n        return;\n      }\n\n      if ('queryObjects' in hints && hints.queryObjects) {\n        void this.queryObjectsRequested(object, executionContextId);\n        return;\n      }\n    }\n\n    if (object.isNode()) {\n      void Common.Revealer.reveal(object).then(object.release.bind(object));\n      return;\n    }\n\n    if (object.type === 'function') {\n      void RemoteFunction.objectAsFunction(object).targetFunctionDetails().then(didGetDetails);\n      return;\n    }\n\n    function didGetDetails(response: FunctionDetails|null): void {\n      object.release();\n      if (!response || !response.location) {\n        return;\n      }\n      void Common.Revealer.reveal(response.location);\n    }\n    object.release();\n  }\n\n  async addBinding(event: Protocol.Runtime.AddBindingRequest): Promise<Protocol.ProtocolResponseWithError> {\n    return await this.agent.invoke_addBinding(event);\n  }\n\n  async removeBinding(request: Protocol.Runtime.RemoveBindingRequest): Promise<Protocol.ProtocolResponseWithError> {\n    return await this.agent.invoke_removeBinding(request);\n  }\n\n  bindingCalled(event: Protocol.Runtime.BindingCalledEvent): void {\n    this.dispatchEventToListeners(Events.BindingCalled, event);\n  }\n\n  private copyRequested(object: RemoteObject): void {\n    if (!object.objectId) {\n      Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText(\n          object.unserializableValue() || (object.value as string));\n      return;\n    }\n\n    const indent = Common.Settings.Settings.instance().moduleSetting('text-editor-indent').get();\n    void object\n        .callFunctionJSON(toStringForClipboard, [{\n                            value: {\n                              subtype: object.subtype,\n                              indent,\n                            },\n                          }])\n        .then(Host.InspectorFrontendHost.InspectorFrontendHostInstance.copyText.bind(\n            Host.InspectorFrontendHost.InspectorFrontendHostInstance));\n\n    function toStringForClipboard(this: Object, data: {\n      subtype: string,\n      indent: string,\n    }): string|undefined {\n      const subtype = data.subtype;\n      const indent = data.indent;\n\n      if (subtype === 'node') {\n        return this instanceof Element ? this.outerHTML : undefined;\n      }\n      if (subtype && typeof this === 'undefined') {\n        return String(subtype);\n      }\n      try {\n        return JSON.stringify(this, null, indent);\n      } catch (error) {\n        return String(this);\n      }\n    }\n  }\n\n  private async queryObjectsRequested(object: RemoteObject, executionContextId?: number): Promise<void> {\n    const result = await this.queryObjects(object);\n    object.release();\n    if ('error' in result) {\n      Common.Console.Console.instance().error(result.error);\n      return;\n    }\n    this.dispatchEventToListeners(Events.QueryObjectRequested, {objects: result.objects, executionContextId});\n  }\n\n  static simpleTextFromException(exceptionDetails: Protocol.Runtime.ExceptionDetails): string {\n    let text = exceptionDetails.text;\n    if (exceptionDetails.exception && exceptionDetails.exception.description) {\n      let description: string = exceptionDetails.exception.description;\n      if (description.indexOf('\\n') !== -1) {\n        description = description.substring(0, description.indexOf('\\n'));\n      }\n      text += ' ' + description;\n    }\n    return text;\n  }\n\n  exceptionThrown(timestamp: number, exceptionDetails: Protocol.Runtime.ExceptionDetails): void {\n    const exceptionWithTimestamp = {timestamp, details: exceptionDetails};\n    this.dispatchEventToListeners(Events.ExceptionThrown, exceptionWithTimestamp);\n  }\n\n  exceptionRevoked(exceptionId: number): void {\n    this.dispatchEventToListeners(Events.ExceptionRevoked, exceptionId);\n  }\n\n  consoleAPICalled(\n      type: Protocol.Runtime.ConsoleAPICalledEventType, args: Protocol.Runtime.RemoteObject[],\n      executionContextId: number, timestamp: number, stackTrace?: Protocol.Runtime.StackTrace, context?: string): void {\n    const consoleAPICall = {\n      type,\n      args,\n      executionContextId,\n      timestamp,\n      stackTrace,\n      context,\n    };\n    this.dispatchEventToListeners(Events.ConsoleAPICalled, consoleAPICall);\n  }\n\n  executionContextIdForScriptId(scriptId: string): number {\n    const script = this.debuggerModel().scriptForId(scriptId);\n    return script ? script.executionContextId : 0;\n  }\n\n  executionContextForStackTrace(stackTrace: Protocol.Runtime.StackTrace): number {\n    let currentStackTrace: (Protocol.Runtime.StackTrace|null)|Protocol.Runtime.StackTrace = stackTrace;\n    while (currentStackTrace && !currentStackTrace.callFrames.length) {\n      currentStackTrace = currentStackTrace.parent || null;\n    }\n    if (!currentStackTrace || !currentStackTrace.callFrames.length) {\n      return 0;\n    }\n    return this.executionContextIdForScriptId(currentStackTrace.callFrames[0].scriptId);\n  }\n\n  terminateExecution(): Promise<Protocol.ProtocolResponseWithError> {\n    return this.agent.invoke_terminateExecution();\n  }\n\n  async getExceptionDetails(errorObjectId: Protocol.Runtime.RemoteObjectId):\n      Promise<Protocol.Runtime.ExceptionDetails|undefined> {\n    const response = await this.agent.invoke_getExceptionDetails({errorObjectId});\n    if (response.getError()) {\n      // This CDP method errors if called with non-Error object ids. Swallow that.\n      return undefined;\n    }\n    return response.exceptionDetails;\n  }\n}\n\nexport enum Events {\n  /* eslint-disable @typescript-eslint/naming-convention -- Used by web_tests. */\n  BindingCalled = 'BindingCalled',\n  ExecutionContextCreated = 'ExecutionContextCreated',\n  ExecutionContextDestroyed = 'ExecutionContextDestroyed',\n  ExecutionContextChanged = 'ExecutionContextChanged',\n  ExecutionContextOrderChanged = 'ExecutionContextOrderChanged',\n  ExceptionThrown = 'ExceptionThrown',\n  ExceptionRevoked = 'ExceptionRevoked',\n  ConsoleAPICalled = 'ConsoleAPICalled',\n  QueryObjectRequested = 'QueryObjectRequested',\n  /* eslint-enable @typescript-eslint/naming-convention */\n}\n\nexport interface ConsoleAPICall {\n  type: Protocol.Runtime.ConsoleAPICalledEventType;\n  args: Protocol.Runtime.RemoteObject[];\n  executionContextId: number;\n  timestamp: number;\n  stackTrace?: Protocol.Runtime.StackTrace;\n  context?: string;\n}\n\nexport interface ExceptionWithTimestamp {\n  timestamp: number;\n  details: Protocol.Runtime.ExceptionDetails;\n}\n\nexport interface QueryObjectRequestedEvent {\n  objects: RemoteObject;\n  executionContextId?: number;\n}\n\nexport type EventTypes = {\n  [Events.BindingCalled]: Protocol.Runtime.BindingCalledEvent,\n  [Events.ExecutionContextCreated]: ExecutionContext,\n  [Events.ExecutionContextDestroyed]: ExecutionContext,\n  [Events.ExecutionContextChanged]: ExecutionContext,\n  [Events.ExecutionContextOrderChanged]: RuntimeModel,\n  [Events.ExceptionThrown]: ExceptionWithTimestamp,\n  [Events.ExceptionRevoked]: number,\n  [Events.ConsoleAPICalled]: ConsoleAPICall,\n  [Events.QueryObjectRequested]: QueryObjectRequestedEvent,\n};\n\nclass RuntimeDispatcher implements ProtocolProxyApi.RuntimeDispatcher {\n  readonly #runtimeModel: RuntimeModel;\n  constructor(runtimeModel: RuntimeModel) {\n    this.#runtimeModel = runtimeModel;\n  }\n\n  executionContextCreated({context}: Protocol.Runtime.ExecutionContextCreatedEvent): void {\n    this.#runtimeModel.executionContextCreated(context);\n  }\n\n  executionContextDestroyed({executionContextId}: Protocol.Runtime.ExecutionContextDestroyedEvent): void {\n    this.#runtimeModel.executionContextDestroyed(executionContextId);\n  }\n\n  executionContextsCleared(): void {\n    this.#runtimeModel.executionContextsCleared();\n  }\n\n  exceptionThrown({timestamp, exceptionDetails}: Protocol.Runtime.ExceptionThrownEvent): void {\n    this.#runtimeModel.exceptionThrown(timestamp, exceptionDetails);\n  }\n\n  exceptionRevoked({exceptionId}: Protocol.Runtime.ExceptionRevokedEvent): void {\n    this.#runtimeModel.exceptionRevoked(exceptionId);\n  }\n\n  consoleAPICalled({type, args, executionContextId, timestamp, stackTrace, context}:\n                       Protocol.Runtime.ConsoleAPICalledEvent): void {\n    this.#runtimeModel.consoleAPICalled(type, args, executionContextId, timestamp, stackTrace, context);\n  }\n\n  inspectRequested({object, hints, executionContextId}: Protocol.Runtime.InspectRequestedEvent): void {\n    this.#runtimeModel.inspectRequested(object, hints, executionContextId);\n  }\n\n  bindingCalled(event: Protocol.Runtime.BindingCalledEvent): void {\n    this.#runtimeModel.bindingCalled(event);\n  }\n}\n\nexport class ExecutionContext {\n  id: Protocol.Runtime.ExecutionContextId;\n  uniqueId: string;\n  name: string;\n  #labelInternal: string|null;\n  origin: Platform.DevToolsPath.UrlString;\n  isDefault: boolean;\n  runtimeModel: RuntimeModel;\n  debuggerModel: DebuggerModel;\n  frameId: Protocol.Page.FrameId|undefined;\n  constructor(\n      runtimeModel: RuntimeModel, id: Protocol.Runtime.ExecutionContextId, uniqueId: string, name: string,\n      origin: Platform.DevToolsPath.UrlString, isDefault: boolean, frameId?: Protocol.Page.FrameId) {\n    this.id = id;\n    this.uniqueId = uniqueId;\n    this.name = name;\n    this.#labelInternal = null;\n    this.origin = origin;\n    this.isDefault = isDefault;\n    this.runtimeModel = runtimeModel;\n    this.debuggerModel = runtimeModel.debuggerModel();\n    this.frameId = frameId;\n    this.setLabelInternal('');\n  }\n\n  target(): Target {\n    return this.runtimeModel.target();\n  }\n\n  static comparator(a: ExecutionContext, b: ExecutionContext): number {\n    function targetWeight(target: Target): number {\n      if (target.parentTarget()?.type() !== Type.FRAME) {\n        return 5;\n      }\n      if (target.type() === Type.FRAME) {\n        return 4;\n      }\n      if (target.type() === Type.ServiceWorker) {\n        return 3;\n      }\n      if (target.type() === Type.Worker || target.type() === Type.SHARED_WORKER) {\n        return 2;\n      }\n      return 1;\n    }\n\n    function targetPath(target: Target): Target[] {\n      let currentTarget: (Target|null)|Target = target;\n      const parents = [];\n      while (currentTarget) {\n        parents.push(currentTarget);\n        currentTarget = currentTarget.parentTarget();\n      }\n      return parents.reverse();\n    }\n\n    const tagetsA = targetPath(a.target());\n    const targetsB = targetPath(b.target());\n    let targetA;\n    let targetB;\n    for (let i = 0;; i++) {\n      if (!tagetsA[i] || !targetsB[i] || (tagetsA[i] !== targetsB[i])) {\n        targetA = tagetsA[i];\n        targetB = targetsB[i];\n        break;\n      }\n    }\n    if (!targetA && targetB) {\n      return -1;\n    }\n\n    if (!targetB && targetA) {\n      return 1;\n    }\n\n    if (targetA && targetB) {\n      const weightDiff = targetWeight(targetA) - targetWeight(targetB);\n      if (weightDiff) {\n        return -weightDiff;\n      }\n      return targetA.id().localeCompare(targetB.id());\n    }\n\n    // Main world context should always go first.\n    if (a.isDefault) {\n      return -1;\n    }\n    if (b.isDefault) {\n      return +1;\n    }\n    return a.name.localeCompare(b.name);\n  }\n\n  async evaluate(options: EvaluationOptions, userGesture: boolean, awaitPromise: boolean): Promise<EvaluationResult> {\n    // FIXME: It will be moved to separate ExecutionContext.\n    if (this.debuggerModel.selectedCallFrame()) {\n      return this.debuggerModel.evaluateOnSelectedCallFrame(options);\n    }\n    return this.evaluateGlobal(options, userGesture, awaitPromise);\n  }\n\n  globalObject(objectGroup: string, generatePreview: boolean): Promise<EvaluationResult> {\n    const evaluationOptions = {\n      expression: 'this',\n      objectGroup,\n      includeCommandLineAPI: false,\n      silent: true,\n      returnByValue: false,\n      generatePreview,\n    };\n    return this.evaluateGlobal((evaluationOptions as EvaluationOptions), false, false);\n  }\n\n  async callFunctionOn(options: CallFunctionOptions): Promise<EvaluationResult> {\n    const response = await this.runtimeModel.agent.invoke_callFunctionOn({\n      functionDeclaration: options.functionDeclaration,\n      returnByValue: options.returnByValue,\n      userGesture: options.userGesture,\n      awaitPromise: options.awaitPromise,\n      throwOnSideEffect: options.throwOnSideEffect,\n      arguments: options.arguments,\n      // Old back-ends don't know about uniqueContextId (and also don't generate\n      // one), so fall back to contextId in that case (https://crbug.com/1192621).\n      ...(this.uniqueId ? {uniqueContextId: this.uniqueId} : {contextId: this.id}),\n    });\n\n    const error = response.getError();\n    if (error) {\n      return {error};\n    }\n    return {object: this.runtimeModel.createRemoteObject(response.result), exceptionDetails: response.exceptionDetails};\n  }\n\n  private async evaluateGlobal(options: EvaluationOptions, userGesture: boolean, awaitPromise: boolean):\n      Promise<EvaluationResult> {\n    if (!options.expression) {\n      // There is no expression, so the completion should happen against global properties.\n      options.expression = 'this';\n    }\n\n    const response = await this.runtimeModel.agent.invoke_evaluate({\n      expression: options.expression,\n      objectGroup: options.objectGroup,\n      includeCommandLineAPI: options.includeCommandLineAPI,\n      silent: options.silent,\n      returnByValue: options.returnByValue,\n      generatePreview: options.generatePreview,\n      userGesture,\n      awaitPromise,\n      throwOnSideEffect: options.throwOnSideEffect,\n      timeout: options.timeout,\n      disableBreaks: options.disableBreaks,\n      replMode: options.replMode,\n      allowUnsafeEvalBlockedByCSP: options.allowUnsafeEvalBlockedByCSP,\n      // Old back-ends don't know about uniqueContextId (and also don't generate\n      // one), so fall back to contextId in that case (https://crbug.com/1192621).\n      ...(this.uniqueId ? {uniqueContextId: this.uniqueId} : {contextId: this.id}),\n    });\n\n    const error = response.getError();\n    if (error) {\n      console.error(error);\n      return {error};\n    }\n    return {object: this.runtimeModel.createRemoteObject(response.result), exceptionDetails: response.exceptionDetails};\n  }\n\n  async globalLexicalScopeNames(): Promise<string[]|null> {\n    const response = await this.runtimeModel.agent.invoke_globalLexicalScopeNames({executionContextId: this.id});\n    return response.getError() ? [] : response.names;\n  }\n\n  label(): string|null {\n    return this.#labelInternal;\n  }\n\n  setLabel(label: string): void {\n    this.setLabelInternal(label);\n    this.runtimeModel.dispatchEventToListeners(Events.ExecutionContextChanged, this);\n  }\n\n  private setLabelInternal(label: string): void {\n    if (label) {\n      this.#labelInternal = label;\n      return;\n    }\n    if (this.name) {\n      this.#labelInternal = this.name;\n      return;\n    }\n    const parsedUrl = Common.ParsedURL.ParsedURL.fromString(this.origin);\n    this.#labelInternal = parsedUrl ? parsedUrl.lastPathComponentWithFragment() : '';\n  }\n}\n\nSDKModel.register(RuntimeModel, {capabilities: Capability.JS, autostart: true});\n\nexport type EvaluationResult = {\n  object: RemoteObject,\n  exceptionDetails?: Protocol.Runtime.ExceptionDetails,\n}|{\n  error: string,\n};\n\nexport interface CompileScriptResult {\n  scriptId?: string;\n  exceptionDetails?: Protocol.Runtime.ExceptionDetails;\n}\n\nexport interface EvaluationOptions {\n  expression: string;\n  objectGroup?: string;\n  includeCommandLineAPI?: boolean;\n  silent?: boolean;\n  returnByValue?: boolean;\n  generatePreview?: boolean;\n  throwOnSideEffect?: boolean;\n  timeout?: number;\n  disableBreaks?: boolean;\n  replMode?: boolean;\n  allowUnsafeEvalBlockedByCSP?: boolean;\n  contextId?: number;\n}\n\nexport interface CallFunctionOptions {\n  functionDeclaration: string;\n  includeCommandLineAPI?: boolean;\n  returnByValue?: boolean;\n  throwOnSideEffect?: boolean;\n  allowUnsafeEvalBlockedByCSP?: boolean;\n  arguments: Array<Protocol.Runtime.CallArgument>;\n  userGesture: boolean;\n  awaitPromise: boolean;\n}\n\nexport type QueryObjectResult = {\n  objects: RemoteObject,\n}|{error: string};\n"],
  "mappings": "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",
  "names": ["indent", "Events"]
}
