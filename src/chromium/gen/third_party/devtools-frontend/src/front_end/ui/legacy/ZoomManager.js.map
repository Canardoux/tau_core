{
  "version": 3,
  "sources": ["../../../../../../../../../third_party/devtools-frontend/src/front_end/ui/legacy/ZoomManager.ts"],
  "sourcesContent": ["// Copyright 2014 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport type * as Host from '../../core/host/host.js';\n\nlet zoomManagerInstance: ZoomManager|undefined;\n\nexport class ZoomManager extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  private frontendHost: Host.InspectorFrontendHostAPI.InspectorFrontendHostAPI;\n  private zoomFactorInternal: number;\n\n  private constructor(window: Window, frontendHost: Host.InspectorFrontendHostAPI.InspectorFrontendHostAPI) {\n    super();\n    this.frontendHost = frontendHost;\n    this.zoomFactorInternal = this.frontendHost.zoomFactor();\n    window.addEventListener('resize', this.onWindowResize.bind(this), true);\n  }\n\n  static instance(opts: {\n    forceNew: boolean|null,\n    win: Window|null,\n    frontendHost: Host.InspectorFrontendHostAPI.InspectorFrontendHostAPI|null,\n  } = {forceNew: null, win: null, frontendHost: null}): ZoomManager {\n    const {forceNew, win, frontendHost} = opts;\n    if (!zoomManagerInstance || forceNew) {\n      if (!win || !frontendHost) {\n        throw new Error(\n            `Unable to create zoom manager: window and frontendHost must be provided: ${new Error().stack}`);\n      }\n\n      zoomManagerInstance = new ZoomManager(win, frontendHost);\n    }\n\n    return zoomManagerInstance;\n  }\n\n  static removeInstance(): void {\n    zoomManagerInstance = undefined;\n  }\n\n  zoomFactor(): number {\n    return this.zoomFactorInternal;\n  }\n\n  cssToDIP(value: number): number {\n    return value * this.zoomFactorInternal;\n  }\n\n  dipToCSS(valueDIP: number): number {\n    return valueDIP / this.zoomFactorInternal;\n  }\n\n  private onWindowResize(): void {\n    const oldZoomFactor = this.zoomFactorInternal;\n    this.zoomFactorInternal = this.frontendHost.zoomFactor();\n    if (oldZoomFactor !== this.zoomFactorInternal) {\n      this.dispatchEventToListeners(Events.ZOOM_CHANGED, {from: oldZoomFactor, to: this.zoomFactorInternal});\n    }\n  }\n}\n\nexport const enum Events {\n  ZOOM_CHANGED = 'ZoomChanged',\n}\n\nexport interface ZoomChangedEvent {\n  from: number;\n  to: number;\n}\n\nexport type EventTypes = {\n  [Events.ZOOM_CHANGED]: ZoomChangedEvent,\n};\n"],
  "mappings": ";AAIA,YAAY,YAAY;AAGxB,IAAI;AAEG,aAAM,oBAAoB,OAAO,cAAc,cAA0B;AAAA,EACtE;AAAA,EACA;AAAA,EAEA,YAAY,QAAgB,cAAsE;AACxG,UAAM;AACN,SAAK,eAAe;AACpB,SAAK,qBAAqB,KAAK,aAAa,WAAW;AACvD,WAAO,iBAAiB,UAAU,KAAK,eAAe,KAAK,IAAI,GAAG,IAAI;AAAA,EACxE;AAAA,EAEA,OAAO,SAAS,OAIZ,EAAC,UAAU,MAAM,KAAK,MAAM,cAAc,KAAI,GAAgB;AAChE,UAAM,EAAC,UAAU,KAAK,aAAY,IAAI;AACtC,QAAI,CAAC,uBAAuB,UAAU;AACpC,UAAI,CAAC,OAAO,CAAC,cAAc;AACzB,cAAM,IAAI;AAAA,UACN,4EAA4E,IAAI,MAAM,EAAE,KAAK;AAAA,QAAE;AAAA,MACrG;AAEA,4BAAsB,IAAI,YAAY,KAAK,YAAY;AAAA,IACzD;AAEA,WAAO;AAAA,EACT;AAAA,EAEA,OAAO,iBAAuB;AAC5B,0BAAsB;AAAA,EACxB;AAAA,EAEA,aAAqB;AACnB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,SAAS,OAAuB;AAC9B,WAAO,QAAQ,KAAK;AAAA,EACtB;AAAA,EAEA,SAAS,UAA0B;AACjC,WAAO,WAAW,KAAK;AAAA,EACzB;AAAA,EAEQ,iBAAuB;AAC7B,UAAM,gBAAgB,KAAK;AAC3B,SAAK,qBAAqB,KAAK,aAAa,WAAW;AACvD,QAAI,kBAAkB,KAAK,oBAAoB;AAC7C,WAAK,yBAAyB,kCAAqB,EAAC,MAAM,eAAe,IAAI,KAAK,mBAAkB,CAAC;AAAA,IACvG;AAAA,EACF;AACF;AAEO,WAAW,SAAX,kBAAWA,YAAX;AACL,EAAAA,QAAA,kBAAe;AADC,SAAAA;AAAA,GAAA;",
  "names": ["Events"]
}
