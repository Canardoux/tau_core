{
  "version": 3,
  "sources": ["../../../../../../../../../third_party/devtools-frontend/src/front_end/ui/legacy/HistoryInput.ts"],
  "sourcesContent": ["// Copyright (c) 2015 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {Keys} from './KeyboardShortcut.js';\nimport {registerCustomElement} from './UIUtils.js';\n\nlet cachedConstructor: (() => Element)|null = null;\n\nexport class HistoryInput extends HTMLInputElement {\n  private history: string[];\n  private historyPosition: number;\n\n  constructor() {\n    super();\n    this.history = [''];\n    this.historyPosition = 0;\n    this.addEventListener('keydown', this.onKeyDown.bind(this), false);\n    this.addEventListener('input', this.onInput.bind(this), false);\n  }\n\n  static create(): HistoryInput {\n    if (!cachedConstructor) {\n      cachedConstructor = registerCustomElement('input', 'history-input', HistoryInput);\n    }\n\n    return cachedConstructor() as HistoryInput;\n  }\n\n  private onInput(_event: Event): void {\n    if (this.history.length === this.historyPosition + 1) {\n      this.history[this.history.length - 1] = this.value;\n    }\n  }\n\n  private onKeyDown(ev: Event): void {\n    const event = (ev as KeyboardEvent);\n    if (event.keyCode === Keys.Up.code) {\n      this.historyPosition = Math.max(this.historyPosition - 1, 0);\n      this.value = this.history[this.historyPosition];\n      this.dispatchEvent(new Event('input', {bubbles: true, cancelable: true}));\n      event.consume(true);\n    } else if (event.keyCode === Keys.Down.code) {\n      this.historyPosition = Math.min(this.historyPosition + 1, this.history.length - 1);\n      this.value = this.history[this.historyPosition];\n      this.dispatchEvent(new Event('input', {bubbles: true, cancelable: true}));\n      event.consume(true);\n    } else if (event.keyCode === Keys.Enter.code) {\n      this.saveToHistory();\n    }\n  }\n\n  private saveToHistory(): void {\n    if (this.history.length > 1 && this.history[this.history.length - 2] === this.value) {\n      return;\n    }\n    this.history[this.history.length - 1] = this.value;\n    this.historyPosition = this.history.length - 1;\n    this.history.push('');\n  }\n}\n"],
  "mappings": ";AAIA,SAAQ,YAAW;AACnB,SAAQ,6BAA4B;AAEpC,IAAI,oBAA0C;AAEvC,aAAM,qBAAqB,iBAAiB;AAAA,EACzC;AAAA,EACA;AAAA,EAER,cAAc;AACZ,UAAM;AACN,SAAK,UAAU,CAAC,EAAE;AAClB,SAAK,kBAAkB;AACvB,SAAK,iBAAiB,WAAW,KAAK,UAAU,KAAK,IAAI,GAAG,KAAK;AACjE,SAAK,iBAAiB,SAAS,KAAK,QAAQ,KAAK,IAAI,GAAG,KAAK;AAAA,EAC/D;AAAA,EAEA,OAAO,SAAuB;AAC5B,QAAI,CAAC,mBAAmB;AACtB,0BAAoB,sBAAsB,SAAS,iBAAiB,YAAY;AAAA,IAClF;AAEA,WAAO,kBAAkB;AAAA,EAC3B;AAAA,EAEQ,QAAQ,QAAqB;AACnC,QAAI,KAAK,QAAQ,WAAW,KAAK,kBAAkB,GAAG;AACpD,WAAK,QAAQ,KAAK,QAAQ,SAAS,CAAC,IAAI,KAAK;AAAA,IAC/C;AAAA,EACF;AAAA,EAEQ,UAAU,IAAiB;AACjC,UAAM,QAAS;AACf,QAAI,MAAM,YAAY,KAAK,GAAG,MAAM;AAClC,WAAK,kBAAkB,KAAK,IAAI,KAAK,kBAAkB,GAAG,CAAC;AAC3D,WAAK,QAAQ,KAAK,QAAQ,KAAK,eAAe;AAC9C,WAAK,cAAc,IAAI,MAAM,SAAS,EAAC,SAAS,MAAM,YAAY,KAAI,CAAC,CAAC;AACxE,YAAM,QAAQ,IAAI;AAAA,IACpB,WAAW,MAAM,YAAY,KAAK,KAAK,MAAM;AAC3C,WAAK,kBAAkB,KAAK,IAAI,KAAK,kBAAkB,GAAG,KAAK,QAAQ,SAAS,CAAC;AACjF,WAAK,QAAQ,KAAK,QAAQ,KAAK,eAAe;AAC9C,WAAK,cAAc,IAAI,MAAM,SAAS,EAAC,SAAS,MAAM,YAAY,KAAI,CAAC,CAAC;AACxE,YAAM,QAAQ,IAAI;AAAA,IACpB,WAAW,MAAM,YAAY,KAAK,MAAM,MAAM;AAC5C,WAAK,cAAc;AAAA,IACrB;AAAA,EACF;AAAA,EAEQ,gBAAsB;AAC5B,QAAI,KAAK,QAAQ,SAAS,KAAK,KAAK,QAAQ,KAAK,QAAQ,SAAS,CAAC,MAAM,KAAK,OAAO;AACnF;AAAA,IACF;AACA,SAAK,QAAQ,KAAK,QAAQ,SAAS,CAAC,IAAI,KAAK;AAC7C,SAAK,kBAAkB,KAAK,QAAQ,SAAS;AAC7C,SAAK,QAAQ,KAAK,EAAE;AAAA,EACtB;AACF;",
  "names": []
}
