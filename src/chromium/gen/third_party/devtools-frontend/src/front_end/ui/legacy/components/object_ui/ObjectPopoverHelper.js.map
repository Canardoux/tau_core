{
  "version": 3,
  "sources": ["../../../../../../../../../../../third_party/devtools-frontend/src/front_end/ui/legacy/components/object_ui/ObjectPopoverHelper.ts"],
  "sourcesContent": ["/*\n * Copyright (C) 2011 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as SDK from '../../../../core/sdk/sdk.js';\nimport * as UI from '../../legacy.js';\nimport * as Components from '../utils/utils.js';\n\nimport {CustomPreviewComponent} from './CustomPreviewComponent.js';\nimport objectPopoverStyles from './objectPopover.css.js';\nimport {ObjectPropertiesSection} from './ObjectPropertiesSection.js';\nimport objectValueStyles from './objectValue.css.js';\n\nconst UIStrings = {\n  /**\n   *@description Text that is usually a hyperlink to more documentation\n   */\n  learnMore: 'Learn more',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/object_ui/ObjectPopoverHelper.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class ObjectPopoverHelper {\n  private readonly linkifier: Components.Linkifier.Linkifier|null;\n  private readonly resultHighlightedAsDOM: boolean;\n  constructor(linkifier: Components.Linkifier.Linkifier|null, resultHighlightedAsDOM: boolean) {\n    this.linkifier = linkifier;\n    this.resultHighlightedAsDOM = resultHighlightedAsDOM;\n  }\n\n  dispose(): void {\n    if (this.resultHighlightedAsDOM) {\n      SDK.OverlayModel.OverlayModel.hideDOMNodeHighlight();\n    }\n    if (this.linkifier) {\n      this.linkifier.dispose();\n    }\n  }\n\n  static async buildObjectPopover(result: SDK.RemoteObject.RemoteObject, popover: UI.GlassPane.GlassPane):\n      Promise<ObjectPopoverHelper|null> {\n    const description = Platform.StringUtilities.trimEndWithMaxLength(result.description || '', MaxPopoverTextLength);\n    let popoverContentElement: HTMLSpanElement|HTMLDivElement|null = null;\n    if (result.type === 'function' || result.type === 'object') {\n      let linkifier: Components.Linkifier.Linkifier|null = null;\n      let resultHighlightedAsDOM = false;\n      if (result.subtype === 'node') {\n        SDK.OverlayModel.OverlayModel.highlightObjectAsDOMNode(result);\n        resultHighlightedAsDOM = true;\n      }\n\n      if (result.customPreview()) {\n        const customPreviewComponent = new CustomPreviewComponent(result);\n        customPreviewComponent.expandIfPossible();\n        popoverContentElement = customPreviewComponent.element;\n      } else {\n        popoverContentElement = document.createElement('div');\n        popoverContentElement.classList.add('object-popover-content');\n        popover.registerCSSFiles([objectValueStyles, objectPopoverStyles]);\n        const titleElement = popoverContentElement.createChild('div', 'object-popover-title');\n        if (result.type === 'function') {\n          titleElement.classList.add('source-code');\n          titleElement.appendChild(ObjectPropertiesSection.valueElementForFunctionDescription(result.description));\n        } else {\n          titleElement.classList.add('monospace');\n          titleElement.createChild('span').textContent = description;\n        }\n        linkifier = new Components.Linkifier.Linkifier();\n        const section = new ObjectPropertiesSection(result, '', linkifier, true /* showOverflow */);\n        section.element.classList.add('object-popover-tree');\n        section.titleLessMode();\n        popoverContentElement.appendChild(section.element);\n      }\n      popoverContentElement.dataset.stableNameForTest = 'object-popover-content';\n      popover.setMaxContentSize(new UI.Geometry.Size(300, 250));\n      popover.setSizeBehavior(UI.GlassPane.SizeBehavior.SET_EXACT_SIZE);\n      popover.contentElement.appendChild(popoverContentElement);\n      return new ObjectPopoverHelper(linkifier, resultHighlightedAsDOM);\n    }\n\n    popoverContentElement = document.createElement('span');\n    popoverContentElement.dataset.stableNameForTest = 'object-popover-content';\n    popover.registerCSSFiles([objectValueStyles, objectPopoverStyles]);\n    const valueElement = popoverContentElement.createChild('span', 'monospace object-value-' + result.type);\n    valueElement.style.whiteSpace = 'pre';\n\n    if (result.type === 'string') {\n      UI.UIUtils.createTextChildren(valueElement, `\"${description}\"`);\n    } else {\n      valueElement.textContent = description;\n    }\n\n    popover.contentElement.appendChild(popoverContentElement);\n    return new ObjectPopoverHelper(null, false);\n  }\n\n  static buildDescriptionPopover(description: string, link: string, popover: UI.GlassPane.GlassPane):\n      ObjectPopoverHelper {\n    const popoverContentElement = document.createElement('div');\n    popoverContentElement.classList.add('object-popover-description-box');\n    const descriptionDiv = document.createElement('div');\n    descriptionDiv.dataset.stableNameForTest = 'object-popover-content';\n    popover.registerCSSFiles([objectPopoverStyles]);\n    descriptionDiv.textContent = description;\n    const learnMoreLink =\n        UI.XLink.XLink.create(link, i18nString(UIStrings.learnMore), undefined, undefined, 'learn-more');\n    const footerDiv = document.createElement('div');\n    footerDiv.classList.add('object-popover-footer');\n    footerDiv.appendChild(learnMoreLink);\n\n    popoverContentElement.appendChild(descriptionDiv);\n    popoverContentElement.appendChild(footerDiv);\n    popover.contentElement.appendChild(popoverContentElement);\n    return new ObjectPopoverHelper(null, false);\n  }\n}\n\nconst MaxPopoverTextLength = 10000;\n"],
  "mappings": "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",
  "names": []
}
