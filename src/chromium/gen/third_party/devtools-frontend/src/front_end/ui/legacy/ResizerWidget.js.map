{
  "version": 3,
  "sources": ["../../../../../../../../../third_party/devtools-frontend/src/front_end/ui/legacy/ResizerWidget.ts"],
  "sourcesContent": ["// Copyright 2014 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\n\nimport {elementDragStart} from './UIUtils.js';\n\nexport class ResizerWidget extends Common.ObjectWrapper.ObjectWrapper<EventTypes> {\n  private isEnabledInternal: boolean;\n  private elementsInternal: Set<HTMLElement>;\n  private readonly installDragOnMouseDownBound: (event: Event) => false | undefined;\n  private cursorInternal: string;\n  private startX?: number;\n  private startY?: number;\n\n  constructor() {\n    super();\n\n    this.isEnabledInternal = true;\n    this.elementsInternal = new Set();\n    this.installDragOnMouseDownBound = this.installDragOnMouseDown.bind(this);\n    this.cursorInternal = 'nwse-resize';\n  }\n\n  isEnabled(): boolean {\n    return this.isEnabledInternal;\n  }\n\n  setEnabled(enabled: boolean): void {\n    this.isEnabledInternal = enabled;\n    this.updateElementCursors();\n  }\n\n  elements(): Element[] {\n    return [...this.elementsInternal];\n  }\n\n  addElement(element: HTMLElement): void {\n    if (!this.elementsInternal.has(element)) {\n      this.elementsInternal.add(element);\n      element.addEventListener('pointerdown', this.installDragOnMouseDownBound, false);\n      this.updateElementCursor(element);\n    }\n  }\n\n  removeElement(element: HTMLElement): void {\n    if (this.elementsInternal.has(element)) {\n      this.elementsInternal.delete(element);\n      element.removeEventListener('pointerdown', this.installDragOnMouseDownBound, false);\n      element.style.removeProperty('cursor');\n    }\n  }\n\n  updateElementCursors(): void {\n    this.elementsInternal.forEach(this.updateElementCursor.bind(this));\n  }\n\n  private updateElementCursor(element: HTMLElement): void {\n    if (this.isEnabledInternal) {\n      element.style.setProperty('cursor', this.cursor());\n      element.style.setProperty('touch-action', 'none');\n    } else {\n      element.style.removeProperty('cursor');\n      element.style.removeProperty('touch-action');\n    }\n  }\n\n  cursor(): string {\n    return this.cursorInternal;\n  }\n\n  setCursor(cursor: string): void {\n    this.cursorInternal = cursor;\n    this.updateElementCursors();\n  }\n\n  private installDragOnMouseDown(event: Event): false|undefined {\n    const element = (event.target as HTMLElement);\n    // Only handle drags of the nodes specified.\n    if (!this.elementsInternal.has(element)) {\n      return false;\n    }\n    elementDragStart(element, this.dragStart.bind(this), event => {\n      this.drag(event);\n    }, this.dragEnd.bind(this), this.cursor(), event);\n    return undefined;\n  }\n\n  private dragStart(event: MouseEvent): boolean {\n    if (!this.isEnabledInternal) {\n      return false;\n    }\n    this.startX = event.pageX;\n    this.startY = event.pageY;\n    this.sendDragStart(this.startX, this.startY);\n    return true;\n  }\n\n  sendDragStart(x: number, y: number): void {\n    this.dispatchEventToListeners(Events.RESIZE_START, {startX: x, currentX: x, startY: y, currentY: y});\n  }\n\n  private drag(event: MouseEvent): boolean {\n    if (!this.isEnabledInternal) {\n      this.dragEnd(event);\n      return true;  // Cancel drag.\n    }\n    this.sendDragMove((this.startX as number), event.pageX, (this.startY as number), event.pageY, event.shiftKey);\n    event.preventDefault();\n    return false;  // Continue drag.\n  }\n\n  sendDragMove(startX: number, currentX: number, startY: number, currentY: number, shiftKey: boolean): void {\n    this.dispatchEventToListeners(Events.RESIZE_UPDATE_XY, {startX, currentX, startY, currentY, shiftKey});\n  }\n\n  private dragEnd(_event: MouseEvent): void {\n    this.dispatchEventToListeners(Events.RESIZE_END);\n    delete this.startX;\n    delete this.startY;\n  }\n}\n\nexport const enum Events {\n  RESIZE_START = 'ResizeStart',\n  RESIZE_UPDATE_XY = 'ResizeUpdateXY',\n  RESIZE_UPDATE_POSITION = 'ResizeUpdatePosition',\n  RESIZE_END = 'ResizeEnd',\n}\n\nexport interface ResizeStartXYEvent {\n  startX: number;\n  currentX: number;\n  startY: number;\n  currentY: number;\n}\n\nexport interface ResizeStartPositionEvent {\n  startPosition: number;\n  currentPosition: number;\n}\n\nexport interface ResizeUpdateXYEvent {\n  startX: number;\n  currentX: number;\n  startY: number;\n  currentY: number;\n  shiftKey: boolean;\n}\n\nexport interface ResizeUpdatePositionEvent {\n  startPosition: number;\n  currentPosition: number;\n  shiftKey: boolean;\n}\n\nexport type EventTypes = {\n  [Events.RESIZE_START]: ResizeStartXYEvent|ResizeStartPositionEvent,\n  [Events.RESIZE_UPDATE_XY]: ResizeUpdateXYEvent,\n  [Events.RESIZE_UPDATE_POSITION]: ResizeUpdatePositionEvent,\n  [Events.RESIZE_END]: void,\n};\n\nexport class SimpleResizerWidget extends ResizerWidget {\n  private isVerticalInternal: boolean;\n  constructor() {\n    super();\n    this.isVerticalInternal = true;\n  }\n\n  isVertical(): boolean {\n    return this.isVerticalInternal;\n  }\n\n  /**\n   * Vertical widget resizes height (along y-axis).\n   */\n  setVertical(vertical: boolean): void {\n    this.isVerticalInternal = vertical;\n    this.updateElementCursors();\n  }\n\n  override cursor(): string {\n    return this.isVerticalInternal ? 'ns-resize' : 'ew-resize';\n  }\n\n  override sendDragStart(x: number, y: number): void {\n    const position = this.isVerticalInternal ? y : x;\n    this.dispatchEventToListeners(Events.RESIZE_START, {startPosition: position, currentPosition: position});\n  }\n\n  override sendDragMove(startX: number, currentX: number, startY: number, currentY: number, shiftKey: boolean): void {\n    if (this.isVerticalInternal) {\n      this.dispatchEventToListeners(\n          Events.RESIZE_UPDATE_POSITION, {startPosition: startY, currentPosition: currentY, shiftKey});\n    } else {\n      this.dispatchEventToListeners(\n          Events.RESIZE_UPDATE_POSITION, {startPosition: startX, currentPosition: currentX, shiftKey});\n    }\n  }\n}\n"],
  "mappings": "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",
  "names": ["event", "Events"]
}
