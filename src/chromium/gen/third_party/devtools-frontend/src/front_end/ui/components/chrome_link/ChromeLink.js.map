{
  "version": 3,
  "sources": ["../../../../../../../../../../third_party/devtools-frontend/src/front_end/ui/components/chrome_link/ChromeLink.ts"],
  "sourcesContent": ["// Copyright 2022 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../../core/common/common.js';\nimport * as Host from '../../../core/host/host.js';\nimport * as Platform from '../../../core/platform/platform.js';\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as LitHtml from '../../lit-html/lit-html.js';\nimport * as VisualLogging from '../../visual_logging/visual_logging.js';\nimport * as ComponentHelpers from '../helpers/helpers.js';\n\nimport chromeLinkStyles from './chromeLink.css.js';\n\nconst {html} = LitHtml;\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-chrome-link': ChromeLink;\n  }\n}\n\n// Use this component to render links to 'chrome://...'-URLs\n// (for which regular <x-link>s do not work).\nexport class ChromeLink extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  readonly #boundRender = this.#render.bind(this);\n  #href: string = '';\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [chromeLinkStyles];\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#boundRender);\n  }\n\n  set href(href: Platform.DevToolsPath.UrlString) {\n    if (!Common.ParsedURL.schemeIs(href, 'chrome:')) {\n      throw new Error('ChromeLink href needs to start with \\'chrome://\\'');\n    }\n    this.#href = href;\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#boundRender);\n  }\n\n  // Navigating to a chrome:// link via a normal anchor doesn't work, so we \"navigate\"\n  // there using CDP.\n  #handleClick(event: MouseEvent): void {\n    const rootTarget = SDK.TargetManager.TargetManager.instance().rootTarget();\n    if (rootTarget === null) {\n      return;\n    }\n    const url = this.#href as Platform.DevToolsPath.UrlString;\n    void rootTarget.targetAgent().invoke_createTarget({url}).then(result => {\n      if (result.getError()) {\n        Host.InspectorFrontendHost.InspectorFrontendHostInstance.openInNewTab(url);\n      }\n    });\n    event.consume(true);\n  }\n\n  #render(): void {\n    const urlForContext = new URL(this.#href);\n    urlForContext.search = '';\n    const jslogContext = Platform.StringUtilities.toKebabCase(urlForContext.toString());\n    // clang-format off\n    LitHtml.render(\n      /* x-link doesn't work with custom click/keydown handlers */\n      /* eslint-disable rulesdir/ban_a_tags_in_lit_html */\n      html`\n        <a href=${this.#href} class=\"link\" target=\"_blank\"\n          jslog=${VisualLogging.link().track({click: true}).context(jslogContext)}\n          @click=${this.#handleClick}><slot></slot></a>\n      `, this.#shadow, {host: this});\n    // clang-format on\n  }\n}\n\ncustomElements.define('devtools-chrome-link', ChromeLink);\n"],
  "mappings": ";AAIA,YAAY,YAAY;AACxB,YAAY,UAAU;AACtB,YAAY,cAAc;AAC1B,YAAY,SAAS;AACrB,YAAY,aAAa;AACzB,YAAY,mBAAmB;AAC/B,YAAY,sBAAsB;AAElC,OAAO,sBAAsB;AAE7B,MAAM,EAAC,KAAI,IAAI;AAUR,aAAM,mBAAmB,YAAY;AAAA,EACjC,UAAU,KAAK,aAAa,EAAC,MAAM,OAAM,CAAC;AAAA,EAC1C,eAAe,KAAK,QAAQ,KAAK,IAAI;AAAA,EAC9C,QAAgB;AAAA,EAEhB,oBAA0B;AACxB,SAAK,QAAQ,qBAAqB,CAAC,gBAAgB;AACnD,SAAK,iBAAiB,gBAAgB,eAAe,MAAM,KAAK,YAAY;AAAA,EAC9E;AAAA,EAEA,IAAI,KAAK,MAAuC;AAC9C,QAAI,CAAC,OAAO,UAAU,SAAS,MAAM,SAAS,GAAG;AAC/C,YAAM,IAAI,MAAM,iDAAmD;AAAA,IACrE;AACA,SAAK,QAAQ;AACb,SAAK,iBAAiB,gBAAgB,eAAe,MAAM,KAAK,YAAY;AAAA,EAC9E;AAAA;AAAA;AAAA,EAIA,aAAa,OAAyB;AACpC,UAAM,aAAa,IAAI,cAAc,cAAc,SAAS,EAAE,WAAW;AACzE,QAAI,eAAe,MAAM;AACvB;AAAA,IACF;AACA,UAAM,MAAM,KAAK;AACjB,SAAK,WAAW,YAAY,EAAE,oBAAoB,EAAC,IAAG,CAAC,EAAE,KAAK,YAAU;AACtE,UAAI,OAAO,SAAS,GAAG;AACrB,aAAK,sBAAsB,8BAA8B,aAAa,GAAG;AAAA,MAC3E;AAAA,IACF,CAAC;AACD,UAAM,QAAQ,IAAI;AAAA,EACpB;AAAA,EAEA,UAAgB;AACd,UAAM,gBAAgB,IAAI,IAAI,KAAK,KAAK;AACxC,kBAAc,SAAS;AACvB,UAAM,eAAe,SAAS,gBAAgB,YAAY,cAAc,SAAS,CAAC;AAElF,YAAQ;AAAA;AAAA;AAAA,MAGN;AAAA,kBACY,KAAK,KAAK;AAAA,kBACV,cAAc,KAAK,EAAE,MAAM,EAAC,OAAO,KAAI,CAAC,EAAE,QAAQ,YAAY,CAAC;AAAA,mBAC9D,KAAK,YAAY;AAAA;AAAA,MAC3B,KAAK;AAAA,MAAS,EAAC,MAAM,KAAI;AAAA,IAAC;AAAA,EAEjC;AACF;AAEA,eAAe,OAAO,wBAAwB,UAAU;",
  "names": []
}
