{
  "version": 3,
  "sources": ["../../../../../../../../../../third_party/devtools-frontend/src/front_end/ui/components/dialogs/IconDialog.ts"],
  "sourcesContent": ["// Copyright 2023 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport '../../../ui/components/icon_button/icon_button.js';\nimport './Dialog.js';\n\nimport * as i18n from '../../../core/i18n/i18n.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport type * as IconButton from '../../../ui/components/icon_button/icon_button.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\nimport * as VisualLogging from '../../../ui/visual_logging/visual_logging.js';\n\nimport type {Dialog as DialogElement, DialogHorizontalAlignment, DialogVerticalPosition} from './Dialog.js';\nimport iconDialogStyles from './iconDialog.css.js';\n\nconst {html} = LitHtml;\n\nconst UIStrings = {\n  /**\n   * @description Title of close button for the shortcuts dialog.\n   */\n  close: 'Close',\n};\n\nconst str_ = i18n.i18n.registerUIStrings('ui/components/dialogs/IconDialog.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'devtools-icon-dialog': IconDialog;\n  }\n}\n\nexport class ShowDialog extends Event {\n  static readonly eventName = 'showdialog';\n\n  constructor() {\n    super(ShowDialog.eventName);\n  }\n}\n\nexport interface IconDialogData {\n  iconData: IconButton.Icon.IconData;\n  closeButton: boolean;\n  // The below are parts of DialogData. See comments of DialogData.\n  position: DialogVerticalPosition;\n  horizontalAlignment: DialogHorizontalAlignment;\n  closeOnESC: boolean;\n  closeOnScroll: boolean;\n}\n\n// This class provides a shorthand for a typical use case of Dialog,\n// i.e. Dialog on an icon.\nexport class IconDialog extends HTMLElement {\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  readonly #renderBound = this.#render.bind(this);\n\n  #data: IconDialogData|null = null;\n\n  #dialog: DialogElement|null = null;\n  #icon: IconButton.Icon.Icon|null = null;\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [iconDialogStyles];\n  }\n\n  set data(data: IconDialogData) {\n    this.#data = data;\n\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#renderBound);\n  }\n\n  #showDialog(): void {\n    if (!this.#dialog) {\n      throw new Error('Dialog not found');\n    }\n    void this.#dialog.setDialogVisible(true);\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#renderBound);\n    this.dispatchEvent(new ShowDialog());\n  }\n\n  #closeDialog(): void {\n    if (!this.#dialog) {\n      throw new Error('Dialog not found');\n    }\n    void this.#dialog.setDialogVisible(false);\n    void ComponentHelpers.ScheduledRender.scheduleRender(this, this.#renderBound);\n  }\n\n  #render(): void {\n    if (this.#data === null) {\n      throw new Error('IconDialog.data is not set');\n    }\n\n    if (!ComponentHelpers.ScheduledRender.isScheduledRender(this)) {\n      throw new Error('IconDialog render was not scheduled');\n    }\n\n    let maybeCloseButton: LitHtml.LitTemplate = LitHtml.nothing;\n    if (this.#data.closeButton) {\n      // Disabled until https://crbug.com/1079231 is fixed.\n      // clang-format off\n      maybeCloseButton = html`\n        <div id='close-button-container'>\n          <div id='close-button-right-aligner'>\n            <devtools-icon\n              @click=${this.#closeDialog}\n              .data=${{\n                iconName: 'cross',\n                color: 'var(--icon-default-hover)',\n                width: '16px',\n                height: '16px',\n              }}\n              jslog=${VisualLogging.close().track({click: true})}\n              title=${i18nString(UIStrings.close)}\n            ></devtools-icon>\n          </div>\n        </div>\n      `;\n                // clang-format on\n    }\n\n    // clang-format off\n    LitHtml.render(html`\n      <devtools-icon\n        @click=${this.#showDialog}\n        on-render=${ComponentHelpers.Directives.nodeRenderedCallback(node => {\n          this.#icon = node as IconButton.Icon.Icon;\n        })}\n        .data=${this.#data.iconData}\n      ></devtools-icon>\n      <devtools-dialog\n        @clickoutsidedialog=${this.#closeDialog}\n        .showConnector=${true}\n        .origin=${() => {\n          if (!this.#icon) {\n            throw new Error('Icon not found');\n          }\n          return this.#icon;\n        }}\n        .position=${this.#data.position}\n        .horizontalAlignment=${this.#data.horizontalAlignment}\n        .closeOnESC=${this.#data.closeOnESC}\n        .closeOnScroll=${this.#data.closeOnScroll}\n        on-render=${ComponentHelpers.Directives.nodeRenderedCallback(node => {\n          this.#dialog = node as DialogElement;\n        })}\n      >\n        ${maybeCloseButton}\n        <div id='slot-container'>\n          <slot></slot>\n        </div>\n      </devtools-dialog>\n    `, this.#shadow, {host: this});\n    // clang-format on\n  }\n}\n\ncustomElements.define('devtools-icon-dialog', IconDialog);\n"],
  "mappings": "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",
  "names": []
}
